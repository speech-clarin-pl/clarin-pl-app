(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(e,t){},136:function(e){e.exports={"TopBar.help":"Pomoc","TopBar.konto":"Konto","Jumbotron.lead":"\u0141atwa w u\u017cyciu platfroma do analizy sygna\u0142u mowy w nagraniach d\u017awi\u0119kowych","Jumbotron.sublead":"Znajdziesz tutaj narz\u0119dzia do rozpoznawania mowy, transkrypcji, segmentacji, analizy itp.","Jumbotron.register":"Zarejestruj si\u0119"}},137:function(e){e.exports={"TopBar.help":"Help","TopBar.konto":"Account","Jumbotron.lead":"Easy to use platform for analyzing the speech signal","Jumbotron.sublead":"You'll find here tools for speech recognition, transcription, segmentation, analysis and much more","Jumbotron.register":"Register"}},147:function(e,t,n){e.exports=n(329)},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},160:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},232:function(e,t){},270:function(e,t,n){},271:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},287:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},299:function(e,t){},305:function(e,t){},308:function(e,t,n){},329:function(e,t,n){"use strict";n.r(t);var a=n(46),r=n(0),o=n.n(r),i=n(29),s=n.n(i),c=(n(152),n(6)),l=n(5),u=n(8),d=n(7),p=n(9),m=n(22),E=(n(153),function(e){return e.children}),f=(n(154),function(e){return o.a.createElement(E,null,o.a.createElement("div",{className:["jumbotron","CustomJumbo"].join(" ")},o.a.createElement("div",{className:"container"},o.a.createElement("h1",{className:"display-4"},"CLARIN-PL"),o.a.createElement("p",{className:"lead"},"Platforma do tworzenia korpus\xf3w i analizy sygna\u0142\xf3w mowy."),o.a.createElement("hr",{className:"my-4"}),o.a.createElement("p",null,"Automatyczne rozpoznawanie mowy z plik\xf3w d\u017awi\u0119kowych, segmentacja, tworzenie korpus\xf3w audio."))))}),h=n(18),g=(n(155),n(19)),v=n(24),y=n(15),b=(n(160),function(e){var t=null,n=null,a=["Input","form-control"];switch(e.invalid&&e.touched&&(a.push("is-invalid"),n=o.a.createElement("p",null,"Wprowad\u017a poprawdn\u0105 warto\u015b\u0107!")),e.inputtype){case"input":t=o.a.createElement("input",Object.assign({onChange:e.whenchanged,className:a.join(" ")},e));break;case"textarea":t=o.a.createElement("textarea",Object.assign({onChange:e.whenchanged,className:a.join(" ")},e));break;default:t=o.a.createElement("input",Object.assign({onChange:e.whenchanged,className:a.join(" ")},e))}return o.a.createElement("div",{className:"Input"},o.a.createElement("label",null,e.label),t,n)}),I=n(13),w=n.n(I),S=n(118),j=function(e,t,n){return{type:"SET_CONTAINER_STATUS",containerId:e,toolType:t,status:n}},C=function(e,t){return{type:"REPO_CREATE_NEW_SESSION",sessionName:e,sessionId:t}},T=function(e){return{type:"REPO_CREATE_NEW_SESSION_FAILED",errorMessage:e}},O=function(e,t,n){return function(e){w.a.get("/repoFiles/getProjectAssets/"+t,{headers:{Authorization:"Bearer "+n}}).then(function(t){var n,a;e((n=t.data.sessions,a=t.data.containers,{type:"REPO_GET_USER_PROJECT_FILES",sessions:n,containers:a}))}).catch(function(t){e(function(e){return{type:"REPO_GET_USER_PROJECT_FILES_FAILED",error:e}}(t))})}},k=function(e){return{type:"REPO_RENAME_FOLDER_FAILED",error:e.toString()}},A=function(e,t,n,a){return function(r){w.a.put("/projectsList/updateProjectName/"+e,{newProjectName:t},{headers:{Authorization:"Bearer "+a}}).then(function(e){r(function(e,t,n,a,r){return{type:"EDIT_NAME",projectId:e,newProjectName:t,message:n,userId:a,token:r}}(e.data.projectId,e.data.newName,e.data.message,n,a)),r({type:"CLOSE_MODAL"})}).catch(function(e){console.log(e),r(function(e){return{type:"EDIT_NAME_FAILED",error:e.message}}(e))})}},P=function(e,t,n){return{type:"INIT_PROJECT",projectId:e,projectTitle:t,projectOwner:n}},D=function(e){return function(t){t(z()),w.a.post("/auth/forgotPass",{email:e}).then(function(e){var n,a;t(L()),t((n=e.data.message,a=e.status,Bn("success",n),{type:"FORGOT_PASS",message:n,resForgotPassStatus:a}))}).catch(function(e){console.log(e.response),t(L()),t(function(e){return{type:"FORGOT_PASS_FAILED",message:e.response.data.message,resForgotPassStatus:e.response.status}}(e))})}},R=function(e,t,n){return function(a){a(z()),w.a.put("/auth/registration",{name:e,email:t,password:n}).then(function(e){a(L()),a(function(e){var t=e.data.message,n=e.data.userId,a=e.status;return Bn("success",t),{type:"REGISTER",message:t,userId:n,resRegistrationStatus:a}}(e))}).catch(function(e){a(L()),a(function(e){var t=e.response.data.message,n=e.response.status;if(e.response.data.data.length>=1)for(var a=0;a<e.response.data.data.length;a++)t+="\n",t+=e.response.data.data[a].msg;return{type:"REGISTER_FAILED",message:t,resRegistrationStatus:n}}(e))})}},N=function(e,t,n,a,r,o){return{type:"LOG_IN",isAuth:e,token:t,authLoading:n,userId:a,userName:r,resLoginStatus:o}},_=function(){return Bn("success","Zosta\u0142e\u015b wylogowany!"),{type:"LOG_OUT"}},F=function(e,t,n){return N(!0,n,!1,e,t)},z=function(){return{type:"START_LOADING"}},L=function(){return{type:"STOP_LOADING"}},x=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loginform:{loginemail:{elementType:"input",elementConfig:{type:"text",placeholder:"Podaj sw\xf3j email"},value:"",validation:{required:!0,minLength:5},valid:!1,touched:!1},loginpass:{elementType:"input",elementConfig:{type:"password",placeholder:"Wpisz has\u0142o"},value:"",validation:{required:!0,minLength:7},valid:!1,touched:!1}},forgotPassForm:{forgotPassEmail:{elementType:"input",elementConfig:{type:"text",placeholder:"Podaj sw\xf3j email"},value:"",validation:{required:!0,minLength:5},valid:!1,touched:!1}},registerform:{registerName:{elementType:"input",elementConfig:{type:"text",placeholder:"Podaj swoje imie"},value:"",validation:{required:!0,minLength:3},valid:!1,touched:!1},registeremail:{elementType:"input",elementConfig:{type:"text",placeholder:"Podaj sw\xf3j email"},value:"",validation:{required:!0,minLength:5},valid:!1,touched:!1},registerpass:{elementType:"input",elementConfig:{type:"password",placeholder:"Wpisz has\u0142o"},value:"",validation:{required:!0,minLength:7},valid:!1,touched:!1}},loginFormIsValid:!1,forgotPassFormIsValid:!1,registerFormIsValid:!1,firstTimeAfterLogin:!1,showRemindPassView:!1},n.forgotPassHandler=function(e){e.preventDefault();var t=n.state.forgotPassForm.forgotPassEmail.value;n.props.onForgotPass(t)},n.loginHandler=function(e){e.preventDefault();var t={};for(var a in n.state.loginform)t[a]=n.state.loginform[a].value;n.props.onLogIn(t.loginemail,t.loginpass)},n.registerHandler=function(e){e.preventDefault();var t={};for(var a in n.state.registerform)t[a]=n.state.registerform[a].value;n.props.onRegister(t.registerName,t.registeremail,t.registerpass)},n.inputRegisterChangedHandler=function(e){var t=Object(h.a)({},n.state.registerform);switch(e.target.name){case"registerName":var a=Object(h.a)({},t.registerName);a.value=e.target.value,a.valid=n.checkValidity(a.value,a.validation),a.touched=1,t.registerName=a;break;case"registerEmail":var r=Object(h.a)({},t.registeremail);r.value=e.target.value,r.valid=n.checkValidity(r.value,r.validation),r.touched=1,t.registeremail=r;break;case"registerPass":var o=Object(h.a)({},t.registerpass);o.value=e.target.value,o.valid=n.checkValidity(o.value,o.validation),o.touched=1,t.registerpass=o}var i=!0;for(var s in t)i=t[s].valid&&i;n.setState({registerform:t,registerFormIsValid:i})},n.inputForgotPassChangedHandler=function(e){var t=Object(h.a)({},n.state.forgotPassForm);switch(e.target.name){case"forgotPassEmail":var a=Object(h.a)({},t.forgotPassEmail);a.value=e.target.value,a.valid=n.checkValidity(a.value,a.validation),a.touched=1,t.forgotPassEmail=a}var r=!0;for(var o in t)r=t[o].valid&&r;n.setState({forgotPassForm:t,forgotPassFormIsValid:r})},n.inputLoginChangedHandler=function(e){var t=Object(h.a)({},n.state.loginform);switch(e.target.name){case"loginEmail":var a=Object(h.a)({},t.loginemail);a.value=e.target.value,a.valid=n.checkValidity(a.value,a.validation),a.touched=1,t.loginemail=a;break;case"loginPass":var r=Object(h.a)({},t.loginpass);r.value=e.target.value,r.valid=n.checkValidity(r.value,r.validation),r.touched=1,t.loginpass=r}var o=!0;for(var i in t)o=t[i].valid&&o;console.log(o),n.setState({loginform:t,loginFormIsValid:o})},n.logOutHandler=function(){n.props.onLogOut(),n.props.history.push("/")},n.showLoginAreaBack=function(e){e.preventDefault(),n.setState({showRemindPassView:!1})},n.forgotPass=function(e){e.preventDefault(),n.setState({showRemindPassView:!0})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"checkValidity",value:function(e,t){var n=!0;return t.required&&(n=""!==e.trim()&&n),t.minLength&&(n=e.length>=t.minLength&&n),n}},{key:"componentDidUpdate",value:function(e,t){this.props.isAuth,e.isAuth}},{key:"render",value:function(){var e=this;this.props.isAuth;201===this.props.resRegistrationStatus||200===this.props.resRegistrationStatus?o.a.createElement("div",{className:"alert alert-success",role:"alert"},this.props.registrationMessage):0!==this.props.resRegistrationStatus&&o.a.createElement("div",{className:"alert alert-warning",role:"alert"},this.props.registrationMessage);if(201===this.props.resLoginStatus||200===this.props.resLoginStatus)o.a.createElement("div",{className:"alert alert-success",role:"alert"},this.props.loginMessage);else if(0!==this.props.resLoginStatus){var t=this.props.loginMessage;"undefined"===typeof t||null===t?o.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Wyst\u0105pi\u0142 problem z serwerem"):o.a.createElement("div",{className:"alert alert-warning",role:"alert"},t)}var n=o.a.createElement("div",{className:"col",key:"a1"},o.a.createElement("h3",null,"Zarejestruj si\u0119"),o.a.createElement("form",{onSubmit:this.registerHandler},o.a.createElement("div",{className:"form-group"},o.a.createElement(b,{inputtype:"input",type:"text",label:"Imie",placeholder:"Podaj swoje imie",name:"registerName",touched:this.state.registerform.registerName.touched,invalid:!this.state.registerform.registerName.valid,whenchanged:function(t){return e.inputRegisterChangedHandler(t)}})),o.a.createElement("div",{className:"form-group"},o.a.createElement(b,{inputtype:"input",type:"text",label:"Adres Email",placeholder:"Podaj adres email",name:"registerEmail",touched:this.state.registerform.registeremail.touched,invalid:!this.state.registerform.registeremail.valid,whenchanged:function(t){return e.inputRegisterChangedHandler(t)}})),o.a.createElement("div",{className:"form-group"},o.a.createElement(b,{inputtype:"input",type:"password",label:"Has\u0142o",placeholder:"Podaj has\u0142o",name:"registerPass",touched:this.state.registerform.registerpass.touched,invalid:!this.state.registerform.registerpass.valid,whenchanged:function(t){return e.inputRegisterChangedHandler(t)}})),o.a.createElement("button",{disabled:!this.state.registerFormIsValid,className:"btn btn-primary"},"Zarejestruj si\u0119"))),a=o.a.createElement("div",{className:"col",key:"a5"},this.props.isAuth?o.a.createElement("div",null,o.a.createElement("h4",null,"Witaj: ",o.a.createElement("span",{className:"loggedAs"},this.props.userName)),o.a.createElement(g.b,{to:"/projectsList"},o.a.createElement("button",{className:"btn btn-primary btn-lg btn-block gotoprojects"},"Przejd\u017a do listy swoich korpus\xf3w")),o.a.createElement("div",null," lub "),o.a.createElement("button",{className:"btn btn-secondary",onClick:this.logOutHandler},"Wyloguj si\u0119")):o.a.createElement("form",{onSubmit:this.forgotPassHandler},o.a.createElement("h3",null,"Przypomnienie has\u0142a"),o.a.createElement("div",{className:"form-group"},o.a.createElement(b,{inputtype:"input",type:"text",label:"Adres Email",placeholder:"Wpisz adres email",name:"forgotPassEmail",touched:this.state.forgotPassForm.forgotPassEmail.touched,invalid:!this.state.forgotPassForm.forgotPassEmail.valid,whenchanged:function(t){return e.inputForgotPassChangedHandler(t)}})),o.a.createElement("button",{disabled:!this.state.forgotPassFormIsValid,className:"btn btn-primary"},"Wy\u015blij email z linkiem do zresetowania has\u0142a"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("a",{href:"#",onClick:this.showLoginAreaBack},"Zaloguj si\u0119"))),r=o.a.createElement("div",{className:"col",key:"a2"},this.props.isAuth?o.a.createElement("div",null,o.a.createElement("h4",null,"Witaj: ",o.a.createElement("span",{className:"loggedAs"},this.props.userName)),o.a.createElement("p",null,"Je\u017celi chcesz skorzysta\u0107 z us\u0142ug z lini polece\u0144, u\u017cyj poni\u017cszego klucza API (czytaj wi\u0119cej ",o.a.createElement("a",{href:"/docs/api.html",target:"_blank"},"TUTAJ"),"):"),o.a.createElement("p",{style:{fontSize:"10px"}},o.a.createElement("b",null,this.props.userToken)),o.a.createElement("p",null,"Je\u017celi chcesz skorzysta\u0107 z interfejsu graficznego"),o.a.createElement(g.b,{to:"/projectsList"},o.a.createElement("button",{className:"btn btn-primary btn-lg btn-block gotoprojects"},"Przejd\u017a do listy swoich korpus\xf3w")),o.a.createElement("div",null," lub "),o.a.createElement("button",{className:"btn btn-secondary",onClick:this.logOutHandler},"Wyloguj si\u0119")):o.a.createElement("form",{onSubmit:this.loginHandler},o.a.createElement("h3",null,"Zaloguj si\u0119"),o.a.createElement("div",{className:"form-group"},o.a.createElement(b,{inputtype:"input",type:"text",label:"Adres Email",placeholder:"Wpisz adres email",name:"loginEmail",touched:this.state.loginform.loginemail.touched,invalid:!this.state.loginform.loginemail.valid,whenchanged:function(t){return e.inputLoginChangedHandler(t)}})),o.a.createElement("div",{className:"form-group"},o.a.createElement(b,{inputtype:"input",type:"password",label:"Has\u0142o",placeholder:"Podaj has\u0142o",name:"loginPass",touched:this.state.loginform.loginpass.touched,invalid:!this.state.loginform.loginpass.valid,whenchanged:function(t){return e.inputLoginChangedHandler(t)}})),o.a.createElement("button",{disabled:!this.state.loginFormIsValid,className:"btn btn-primary"},"Zaloguj si\u0119"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("a",{href:"#",onClick:this.forgotPass},"Zapomnia\u0142em has\u0142a"))),i=null;return i=this.state.showRemindPassView?a:r,o.a.createElement(E,null,this.props.isLoading?Jn():null,o.a.createElement("div",{className:["container-fluid","LoginArea"].join(" ")},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},this.props.isAuth?null:o.a.createElement("p",{style:{textAlign:"center"}},"Aby skorzysta\u0107 z serwisu nale\u017cy by\u0107 zalogowanym. Za\u0142\xf3\u017c konto poni\u017cej"))),o.a.createElement("div",{className:"row"},this.props.isAuth?r:[n,i]))))}}]),t}(r.Component),U=Object(y.b)(function(e){return{isAuth:e.homeR.isAuth,userToken:e.homeR.token,loggedEmail:e.homeR.email,userName:e.homeR.userName,registrationMessage:e.homeR.registrationMessage,loginMessage:e.homeR.loginMessage,resRegistrationStatus:e.homeR.resRegistrationStatus,resLoginStatus:e.homeR.resLoginStatus,forgotPassEmailSent:e.homeR.forgotPassEmailSent,resForgotPassStatus:e.homeR.resForgotPassStatus,forgotPassMessage:e.homeR.forgotPassMessage,isLoading:e.homeR.isLoading}},function(e){return{onForgotPass:function(t){return e(D(t))},onLogIn:function(t,n){return e((a=t,r=n,function(e){e(z()),w.a.post("/auth/login",{email:a,password:r}).then(function(t){if(e(L()),422===t.status)throw new Error("Validation failed.");if(404===t.status)throw new Error("Page not found");if(200!==t.status&201!==t.status)throw new Error("Could not authenticate");localStorage.setItem("token",t.data.token),localStorage.setItem("userId",t.data.userId),localStorage.setItem("userName",t.data.userName),e(N(!0,t.data.token,!1,t.data.userId,t.data.userName,t.status));var n=new Date((new Date).getTime()+36e6);localStorage.setItem("expiryDate",n.toISOString()),e({type:"SET_AUTO_LOGOUT",autoLogoutAfter:36e6})}).catch(function(t){e(L()),e(function(e){return{type:"LOG_IN_FAILED",isAuth:!1,authLoading:!1,message:e.response.data.message,resLoginStatus:e.response.status}}(t))})}));var a,r},onRegister:function(t,n,a){return e(R(t,n,a))},onLogOut:function(){return e(_())}}})(Object(v.g)(x)),M=(n(180),function(e){var t=["btn","btn-secondary","btn-lg btn-block","introButton"];return o.a.createElement(E,null,o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement("a",{href:"#mowa",className:t.join(" ")},"Wsparcie w transkrypcji kolekcji plik\xf3w audio"),o.a.createElement("a",{href:"#pliki",className:t.join(" ")},"Tworzenie korpus\xf3w audio")),o.a.createElement("div",{className:"col"},o.a.createElement("a",{href:"#bezpieczenstwo",className:t.join(" ")},"Bezpiecze\u0144stwo danych"),o.a.createElement("a",{href:"#latwosc",className:t.join(" ")},"\u0141atwo\u015b\u0107 obs\u0142ugi"))))),o.a.createElement("div",{className:["container-fluid","DecoIntro"].join(" ")},o.a.createElement("div",{className:"container"})))}),V=(n(181),function(e){return o.a.createElement(E,null,o.a.createElement("div",{className:["container","HomeText"].join(" ")},o.a.createElement("div",{className:"row"},o.a.createElement("dir",{className:"col"},o.a.createElement("h3",{id:"mowa"},"Automatycza transkrypcja nagra\u0144"),o.a.createElement("p",null,"Serwis udost\u0119pnia narz\u0119dzia do rozpoznawania oraz segmentacji nagra\u0144 zawieraj\u0105cych mow\u0119. Robi to w spos\xf3b automatyczny, wyr\u0119czaj\u0105c u\u017cytkownika w dokonywaniu transkrypcji w spos\xf3b manualny. Istnieje mo\u017cliwo\u015b\u0107 przetwarzania wsadowego, wielu plik\xf3w jednocze\u015bnie. U\u017cytkownik posiada mo\u017cliwo\u015b\u0107 dokonywania r\u0119cznych korekt transkrypcji automatycznych b\u0105d\u017a tworzenia transkrypcji zupe\u0142nie manualnie w spos\xf3b zoptymalizowany i bez potrzeby odrywania r\u0105k od klawiatury!"),o.a.createElement("h3",{id:"pliki"},"Tworzenie korpus\xf3w audio"),o.a.createElement("p",null,"Swoje zasoby d\u017awi\u0119kowe mo\u017cesz przechowywa\u0107 w centralnym repozytorium plik\xf3w, dost\u0119pnym tylko dla Ciebie po zalogowaniu. W ka\u017cdym momencie mo\u017cesz usun\u0105\u0107 pliki z serwera b\u0105d\u017a pobra\u0107 je na dysk twardy. Portal umo\u017cliwia tworzenie korpus\xf3w, gotowych do dalszej analizy w \u015brodowisku EMU-SDMD do bada\u0144 naukowych.")),o.a.createElement("dir",{className:"col",id:"bezpieczenstwo"},o.a.createElement("h3",{id:"bezpieczenstwo"},"Bezpiecze\u0144stwo danych"),o.a.createElement("p",null,"Twoje pliki s\u0105 chronione specjalnym kluczem zabezpiecze\u0144, a dost\u0119p do nich jest mo\u017cliwy tylko dla zalogowanych u\u017cytkownik\xf3w."),o.a.createElement("h3",{id:"latwosc"},"\u0141atwo\u015b\u0107 obs\u0142ugi"),o.a.createElement("p",null,"Serwis zosta\u0142 tak zaprojektowany aby w maksymalny spos\xf3b u\u0142atwi\u0107 jego obs\u0142ug\u0119. Nawigacja w serwisie nie powinna sprawia\u0107 \u017cadnego problemu. Interfejs u\u017cytkownika przewiduje dost\u0119pno\u015b\u0107 wszystkich funkcjonalno\u015bci w jednym miejscu, bez konieczno\u015bci nawigowania w strukturze serwisu.")))))}),G=(n(182),n(54)),H=n.n(G),B=function(e){return o.a.createElement(E,null,o.a.createElement("footer",{className:["text-muted","container-fluid","AppFooter"].join(" ")},o.a.createElement("div",{className:"container"},o.a.createElement("div",null,"CLARIN-PL ",H()().format("YYYY")),o.a.createElement("div",{className:"contactInfo"},o.a.createElement("div",null,"Main developers: Danijel Korzinek (speech services): danijel@pjwstk.edu.pl, Mariusz Kle\u0107 (front-end and back-end of the web): mklec@pjwstk.edu.pl ")))))},W=(n(183),n(69)),J=n.n(W),K=n(11),Z=n(3),q=n(55),X=n.n(q),Y=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r))))._handleFocus=function(e){},n._handleFocusOut=function(e){n.props.onChangeProjectName(n.props.projectID,e,n.props.userId,n.props.token)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e="init"===this.props.version,t=["TopBar","navbar","navbar-expand"];return e&&t.push("init"),o.a.createElement("nav",{className:t.join(" ")},o.a.createElement("div",{className:"no"===this.props.wide?"container":"container-fluid"},o.a.createElement(g.b,{to:"/",className:"navbar-brand",onClick:this.props.clickLogo},o.a.createElement("div",{className:"logoPlace"},o.a.createElement("img",{src:J.a,alt:"clarin-logo",className:"logo"}))),o.a.createElement("div",{className:"projectTitleEdit"},e?null:o.a.createElement("div",null,o.a.createElement("div",{style:{float:"left"}},o.a.createElement(g.b,{to:"/projectsList"},o.a.createElement(K.a,{icon:Z.v,className:"faIcon"}),o.a.createElement("i",{className:["fas","fa-arrow-left"].join(" ")}))),o.a.createElement("div",{style:{float:"left"}},o.a.createElement(X.a,{text:this.props.projectName,labelClassName:"myLabelClass",inputClassName:"myInputClass",inputWidth:"200px",isEditing:!1,inputHeight:"25px",inputMaxLength:80,onFocus:this._handleFocus,onFocusOut:this._handleFocusOut})))),o.a.createElement("ul",{className:"navbar-nav"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{href:"/apidoc/index.html",target:"_blank",id:"navbarDropdownMenuLinkpomoc",className:["nav-link","navLink"].join(" ")},o.a.createElement(K.a,{icon:Z.z,className:"faIcon"})," API doc")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{href:"/docs/doc.html",target:"_blank",id:"navbarDropdownMenuLinkpomoc",className:["nav-link","navLink"].join(" ")},o.a.createElement(K.a,{icon:Z.u,className:"faIcon"})," Pomoc")))))}}]),t}(r.Component),$=Object(y.b)(function(e){return{projectName:e.projectR.currentProjectName,token:e.homeR.token,projectID:e.projectR.currentProjectID,userId:e.projectR.currentProjectOwner}},function(e){return{onChangeProjectName:function(t,n,a,r){return e(A(t,n,a,r))}}})(Y),Q=function(e){return o.a.createElement(E,null,o.a.createElement($,{version:"init",wide:"no",language:"pl",projectTitle:"",changeLn:e.changeLn,currLn:e.currLn}),o.a.createElement(f,null),o.a.createElement(U,null),o.a.createElement(M,null),o.a.createElement(V,null),o.a.createElement(B,null))},ee=(n(186),n(187),function(e){return o.a.createElement(E,null,o.a.createElement("div",{className:"SettingBar"},o.a.createElement("nav",{className:"navbar navbar-expand-lg"},o.a.createElement("div",{className:" navbar-collapse"}))))}),te=(n(188),n(189),function(e){return o.a.createElement(E,null,o.a.createElement("div",{className:"FooterTool"},o.a.createElement("div",null,"CLARIN-PL ",H()().format("YYYY")),o.a.createElement("div",{className:"contactInfo"},"Main developers: ",o.a.createElement("br",null),"Danijel Korzinek: danijel@pjwstk.edu.pl",o.a.createElement("br",null),"Mariusz Kle\u0107: mklec@pjwstk.edu.pl",o.a.createElement("br",null))))}),ne=(n(190),function(e){return o.a.createElement(E,null,o.a.createElement("div",{className:"LeftSiteBar",id:"LeftSiteBar"},o.a.createElement("div",{className:"true"===e.czyTopPart?"topPart":"resetTopPart"}),o.a.createElement("div",{className:"true"===e.czyTopPart?"hintPanel":"resetHintPanel"},o.a.createElement("div",{className:"btn-group-vertical btn-block",id:"hint-buttons"},e.children),o.a.createElement("div",{id:"hint-content","data-scrollbar":!0},o.a.createElement("div",{className:"container-fluid texts"},e.desc)))))}),ae=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(E,null,o.a.createElement(ne,{czyTopPart:"true",desc:"W tym miejscu znajduj\u0105 si\u0119 statystyki aktualnie wykonywanych us\u0142ug oraz przestrzeni zajmowanej przez wgrane pliki do repozytorium."}),o.a.createElement(ee,null),o.a.createElement("section",{className:"Content","data-scrollbar":!0},o.a.createElement("div",{className:["container-fluid","Dashboard"].join(" ")},o.a.createElement("div",{className:"tool-desc"}),o.a.createElement("div",{className:"tool-body"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"card mb-3"},o.a.createElement("div",{className:["card-header","cardHeader"].join(" ")},"Aktualno\u015bci"),o.a.createElement("div",{className:"card-body text-dark"},o.a.createElement("h5",{className:"news-title"},"Wersja beta nowego serwisu "),o.a.createElement("div",{className:"news-date"},"01.07.2020"),o.a.createElement("p",{className:"news-body"},"Mi\u0142o nam przywita\u0107 Ci\u0119 w panelu nowego serwisu. ",o.a.createElement("b",null,"Wszelkie uwagi na temat jego funkcjonowania ")," s\u0105 mile widziane. Skontaktuj si\u0119 z nami je\u017celi masz jakiekolwiek pytania:"),o.a.createElement("p",null,"Danijel Korzinek: danijel@pjwstk.edu.pl ",o.a.createElement("br",null),"Mariusz Kle\u0107: mklec@pjwstk.edu.pl")))),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("div",{className:"card mb-3"},o.a.createElement("div",{className:["card-header","cardHeader"].join(" ")},"Szybkie linki"),o.a.createElement("div",{className:"card-body text-dark"},o.a.createElement("p",null,o.a.createElement(g.b,{to:this.props.location.pathname.replace("dashboard","recognition")},o.a.createElement("button",{type:"button",className:"btn btn-primary btn-block op-btn"},o.a.createElement("i",{className:"fas fa-comments"})," Rozpoznawanie mowy"))),o.a.createElement("p",null,o.a.createElement(g.b,{to:this.props.location.pathname.replace("dashboard","segment")},o.a.createElement("button",{type:"button",className:"btn btn-primary btn-block op-btn"},o.a.createElement("i",{className:"fas fa-cogs"})," Segmentacja"))),o.a.createElement("p",null,o.a.createElement(g.b,{to:"/help"},o.a.createElement("button",{type:"button",className:"btn btn-primary btn-block op-btn"},o.a.createElement("i",{className:"fas fa-question-circle"})," Pomoc")))))))),o.a.createElement("p",null," ")),o.a.createElement(te,null)))}}]),t}(r.Component),re=Object(y.b)(function(e){return{containersForREC:e.recR.containersForREC,containersForSEG:e.segR.containersForSEG,repoFiles:e.repoR.files}},function(e){return{}})(Object(v.g)(ae)),oe=(n(191),n(192),function(e){var t=!!e.disabled;return o.a.createElement("button",{disabled:t,className:"btn btn-primary btn-lg btn-block ButtonLeftBar",onClick:e.whenClicked,style:e.customeStyle},o.a.createElement("span",{className:"icon"},e.icon),e.napis)}),ie=(n(193),n(14)),se=n(349),ce=n(47),le=n(17),ue=(n(218),n(219),function(e){return e.show?o.a.createElement("div",{className:"Backdrop",onClick:e.clicked}):null}),de=function(e){return o.a.createElement(E,null,o.a.createElement(ue,{show:e.show,clicked:e.modalClosed}),e.show?o.a.createElement("div",{className:"Modal"},o.a.createElement("div",{className:"modalTitle"},o.a.createElement("h5",null,e.modalTitle)),o.a.createElement("div",{className:"modal-body"},e.children)):null)};function pe(){var e=Object(a.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return pe=function(){return e},e}var me=Object(le.css)(pe()),Ee=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1},n.closeModalHandler=function(){n.setState({modal:!1})},n.componentDidUpdate=function(e,t){},n.componentDidMount=function(){},n.runPreview=function(e){n.props.openPreview(n.props.container)},n.runProcess=function(e){e.preventDefault(),n.closeModalHandler(),n.props.runTool(n.props.container,n.props.type,n.props.token)},n.downloadElement=function(e){var t="https://mowa.clarin-pl.eu:8433/api/repoFiles/"+n.props.container.owner+"/"+n.props.container.project+"/"+n.props.container.session+"/"+n.props.container._id+"/"+e+"/?api_key="+n.props.token;window.open(t,"_self")},n.handleClick=function(e,t){var a=t.action;switch(a){case"copyId":var r=n.props.container._id;n.copyToClipboard(r);break;case"usun":n.props.onRemoveItem(n.props.container);break;case"audio":case"oryginalAudio":case"VADctm":case"VADtextGrid":case"DIActm":case"DIAtextGrid":case"TXTTranscript":case"JSONTranscript":case"SEGctm":case"SEGtextGrid":case"EMUJSON":n.downloadElement(a);break;default:console.log("wrong action")}},n.removeThisItem=function(){n.props.onRemoveItem(n.props.container)},n.runProcessAgain=function(){n.setState({modal:!0})},n.copyToClipboard=function(e){var t=e,n=document.createElement("textarea");n.value=t,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=Z.j,t="",n="",a="";switch(this.props.type){case"DIA":e=Z.f,this.props.container._id==this.props.DIAcontainerInPreview._id&&(t="editing");break;case"VAD":e=Z.y,this.props.container._id==this.props.VADcontainerInPreview._id&&(t="editing");break;case"REC":e=Z.j,this.props.container._id==this.props.RECcontainerInPreview._id&&(t="editing");break;case"SEG":e=Z.d,this.props.container._id==this.props.SEGcontainerInPreview._id&&(t="editing");break;default:console.log("Default")}for(var r=this.props.container.size,i=r+" bytes",s=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],c=0,l=r/1024;l>1;l/=1024,c++)i=l.toFixed(1)+" "+s[c];var u=1,d=null,p=null,m=o.a.createElement(se.a,{title:"Uruchom "+this.props.type},o.a.createElement("a",{href:"#",role:"button",onClick:this.runProcess},o.a.createElement(K.a,{icon:e,className:"faIcon"})));switch(this.props.status){case"ready":d=null,u=1;break;case"error":d=o.a.createElement(se.a,{title:this.props.errorMessage},o.a.createElement("a",{href:"#"},o.a.createElement(K.a,{icon:Z.g,className:"faIcon",style:{color:"red"}})));break;case"progress":d=o.a.createElement(ce.RingLoader,{css:me,size:"25px",color:"rgb(52, 152, 219)",loading:!0}),p=o.a.createElement("div",{className:"progress"},o.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}})),u=.5,m=o.a.createElement(K.a,{icon:e,className:"faIcon",style:{opacity:.5,color:"#3498db"}});break;case"done":u=1,d=o.a.createElement(K.a,{icon:Z.a,className:"faIcon"}),p=null,n="Czy na pewno chcesz ponownie uruchomi\u0107 us\u0142ug\u0119 automatyczn\u0105?",a=o.a.createElement("div",null,o.a.createElement("p",null,"Wszystkie Twoje r\u0119czne korekty zostan\u0105 nadpisane"),o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.runProcess},"TAK"),o.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:this.closeModalHandler},"NIE")),m=o.a.createElement(se.a,{title:"Uruchom "+this.props.type},o.a.createElement("a",{href:"#",role:"button",onClick:this.runProcessAgain},o.a.createElement(K.a,{icon:e,className:"faIcon",style:{opacity:1,color:"#1cce44"}})));default:d=null}o.a.createElement(se.a,{title:"Podgl\u0105d "+this.props.type},o.a.createElement("a",{href:"#",role:"button",onClick:1===u?this.runPreview:null},o.a.createElement(K.a,{icon:Z.i,className:"faIcon",style:{opacity:u,color:"#3498db"}})));return o.a.createElement(E,null,o.a.createElement(de,{show:this.state.modal,modalClosed:this.closeModalHandler,modalTitle:n},a),o.a.createElement(ie.b,{id:"ToolItemId"+this.props.container._id},o.a.createElement("a",{href:"#",role:"button",onClick:1===u?this.runPreview:null},o.a.createElement("div",{className:"ToolItem "+t},o.a.createElement("div",{className:["row","toolItem"].join(" ")},o.a.createElement("div",{className:"col-sm-6 file-info align-self-center pr-1"},o.a.createElement("span",{className:"fileName"},this.props.container.containerName)),o.a.createElement("div",{className:"col-sm-2 filesize align-self-center pl-1 pr-1 pl-1"},i),o.a.createElement("div",{className:"col-sm-1 status align-self-center pl-1 pr-1"},d),o.a.createElement("div",{className:"col-sm-3 actionIcons align-self-center pl-1 pr-1"},m)),p))),o.a.createElement(ie.a,{id:"ToolItemId"+this.props.container._id},o.a.createElement(ie.c,{disabled:!1,data:{toolType:this.props.type,action:"copyId"},onClick:this.handleClick},"Kopiuj ID: ",this.props.container._id),o.a.createElement(ie.c,{divider:!0}),o.a.createElement(ie.c,{disabled:!1,data:{toolType:this.props.type,action:"usun"},onClick:this.handleClick},"Usu\u0144 element z listy"),o.a.createElement(ie.c,{divider:!0}),o.a.createElement(ie.c,{disabled:!1,data:{toolType:this.props.type,action:"audio"},onClick:this.handleClick},"Pobierz plik audio WAV 16000Hz, 16bit"),o.a.createElement(ie.c,{disabled:!1,data:{toolType:this.props.type,action:"oryginalAudio"},onClick:this.handleClick},"Pobierz oryginalny plik audio"),o.a.createElement(ie.c,{divider:!0}),o.a.createElement(ie.c,{disabled:!this.props.container.ifVAD,data:{toolType:this.props.type,action:"VADctm"},onClick:this.handleClick},"Pobierz plik detekcji mowy w formacie CTM"),o.a.createElement(ie.c,{disabled:!this.props.container.ifVAD,data:{toolType:this.props.type,action:"VADtextGrid"},onClick:this.handleClick},"Pobierz plik detekcji mowy w formacie TextGrid"),o.a.createElement(ie.c,{disabled:!this.props.container.ifDIA,data:{toolType:this.props.type,action:"DIActm"},onClick:this.handleClick},"Pobierz plik diaryzacji w formacie CTM"),o.a.createElement(ie.c,{disabled:!this.props.container.ifDIA,data:{toolType:this.props.type,action:"DIAtextGrid"},onClick:this.handleClick},"Pobierz plik diaryzacji mowy w formacie TextGrid"),o.a.createElement(ie.c,{disabled:!this.props.container.ifREC,data:{toolType:this.props.type,action:"TXTTranscript"},onClick:this.handleClick},"Pobierz transkrypcje w formacie txt"),o.a.createElement(ie.c,{disabled:!this.props.container.ifREC,data:{toolType:this.props.type,action:"JSONTranscript"},onClick:this.handleClick},"Pobierz transkrypcje w formacie json"),o.a.createElement(ie.c,{disabled:!this.props.container.ifSEG,data:{toolType:this.props.type,action:"SEGctm"},onClick:this.handleClick},"Pobierz segmentacje w formacie ctm"),o.a.createElement(ie.c,{disabled:!this.props.container.ifSEG,data:{toolType:this.props.type,action:"SEGtextGrid"},onClick:this.handleClick},"Pobierz segmentacje w formacie TextGrid"),o.a.createElement(ie.c,{disabled:!this.props.container.ifSEG,data:{toolType:this.props.type,action:"EMUJSON"},onClick:this.handleClick},"Pobierz segmentacje w formacie json")))}}]),t}(r.Component),fe=Object(y.b)(function(e){return{userId:e.projectR.currentProjectOwner,projectId:e.projectR.currentProjectID,token:e.homeR.token,RECcontainerInPreview:e.recR.recoContainerForPreview,VADcontainerInPreview:e.vadR.vadContainerForPreview,DIAcontainerInPreview:e.diaR.diaContainerForPreview,SEGcontainerInPreview:e.segR.alignContainerForPreview}},function(e){return{}})(Object(v.g)(Ee)),he=n(25),ge=(n(220),n(123)),ve=n.n(ge),ye=n(36),be=(n(221),n(124)),Ie=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).componentDidUpdate=function(e,t){},n.componentDidMount=function(){n.setState({editorisready:!0}),n.props.onLoadTranscription()},n.loadNextForTranscript=function(){n.props.onLoadNextElement()},n.state={editorisready:!1,transcriptHasChanged:!1};return n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=!1,n="Za\u0142aduj transkrypcje z serwera",a={backgroundColor:"#3498db"},r=!1,i="Zapisz transkrypcj\u0119 na serwerze",s={backgroundColor:"#3498db"};return this.props.container.ifREC||(t=!0,n="Rozpocznij transkrypcje",a={backgroundColor:"#3498db",textAlign:"center"},r=!1,i="Plik niezmieniony",s={backgroundColor:"#c7d5da",textAlign:"center"}),!this.props.container.ifREC&&this.props.transcriptHasChanged&&(r=!1,i="Zapisz zmiany na serwerze",s={backgroundColor:"#3498db",textAlign:"center"}),this.props.container.ifREC&&!this.props.transcriptHasChanged&&(t=!0,n="Transkrypcja za\u0142adowana pomy\u015blnie",a={backgroundColor:"#46d363",textAlign:"center"},r=!0,i="Plik niezmieniony",s={backgroundColor:"#c7d5da",textAlign:"center"}),this.props.container.ifREC&&this.props.transcriptHasChanged&&(t=!1,n="Za\u0142aduj poprzedni\u0105 wersj\u0119 z serwera",a={backgroundColor:"#efb710",textAlign:"center"},r=!1,i="Zapisz zmiany na serwerze",s={backgroundColor:"#3498db",textAlign:"center"}),this.props.transcriptionSaved&&""!=this.props.text&&(t=!0,n="Transkrypcja zosta\u0142a zapisana pomy\u015blnie",a={backgroundColor:"#46d363",textAlign:"center"},r=!0,i="Plik niezmieniony",s={backgroundColor:"#c7d5da",textAlign:"center"}),o.a.createElement(E,null,o.a.createElement("div",{className:"TextEditor"},o.a.createElement(oe,{napis:n,iconType:"file",icon:null,customeStyle:a,disabled:t,whenClicked:this.props.onLoadTranscription}),o.a.createElement(be.a,{maxRows:1e3,minRows:5,className:"textEditor",onChange:this.props.onTextChanged,value:this.props.text,inputRef:function(t){return e.textarea=t},autoFocus:!0}),o.a.createElement(oe,{napis:i,iconType:"file",icon:null,customeStyle:s,disabled:r,whenClicked:this.props.onSaveChanges}),o.a.createElement(oe,{napis:"Za\u0142aduj kolejny na li\u015bcie",iconType:"file",icon:null,customeStyle:{backgroundColor:"#3498db",textAlign:"center"},disabled:!1,whenClicked:this.loadNextForTranscript})))}}]),t}(r.Component),we=Object(y.b)(function(e){return{token:e.homeR.token,transcriptionSaved:e.projectR.transcriptionSaved,transcriptionData:e.recR.transcriptionData}},function(e){return{}})(Ie),Se=(n(222),n(223),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).componentDidUpdate=function(e,t){},n.updateStartTimeSegment=function(e){var t=e.target;if(t){var a=parseFloat(t.value);a<0&&(a=0),a>=n.props.endTime&&(a=n.props.endTime-.1),n.props.onUpdateStartTime(n.props.segmentId,parseFloat(a))}},n.updateEndTimeSegment=function(e){var t=e.target;if(t){var a=parseFloat(t.value);a<0&&(a=.1),a<=n.props.startTime&&(a=n.props.startTime+.1),n.props.onUpdateEndTime(n.props.segmentId,parseFloat(a))}},n.updateSegmentLabel=function(e){var t=e.target;if(t){var a=t.value;n.props.onUpdateLabel(n.props.segmentId,a)}},n.playSegment=function(){n.props.onPlaySegment(n.props.segmentId)},n.removeSegment=function(){n.props.onRemoveSegment(n.props.segmentId)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement(E,null,o.a.createElement("tr",{className:"Segment"},o.a.createElement("td",null,o.a.createElement("input",{className:"szerzej","data-action":"update-segment-label",onChange:this.updateSegmentLabel,type:"text",value:this.props.labelText,"data-id":this.props.segmentId})),o.a.createElement("td",null,o.a.createElement("input",{"data-action":"update-segment-start-time",onChange:this.updateStartTimeSegment,type:"number",value:this.props.startTime,"data-id":this.props.segmentId})),o.a.createElement("td",null,o.a.createElement("input",{"data-action":"update-segment-end-time",onChange:this.updateEndTimeSegment,type:"number",value:this.props.endTime,"data-id":this.props.segmentId})),o.a.createElement("td",null,o.a.createElement("a",{href:"#"+this.props.segmentId,id:"playBtn","data-action":"play-segment","data-id":this.props.segmentId},"Play")),o.a.createElement("td",null,o.a.createElement("a",{href:"#"+this.props.segmentId,id:"removeBtn","data-action":"remove-segment","data-id":this.props.segmentId},"Usu\u0144"))))}}]),t}(r.Component)),je=Object(y.b)(function(e){return{}},function(e){return{}})(Se),Ce=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).updateLabel=function(e,t){n.props.onUpdateSegmentLabel(e,t)},n.updateStartTime=function(e,t){n.props.onUpdateSegmentStartTime(e,t)},n.updateEndTime=function(e,t){n.props.onUpdateSegmentEndTime(e,t)},n.componentWillMount=function(){},n.componentDidUpdate=function(){},n.playSegment=function(e){n.props.onPlaySegment(e)},n.removeSegment=function(e){n.props.onRemoveSegment(e)},n.renderSegments=function(){return n.props.segments.sort(function(e,t){return e.startTime-t.startTime}),n.props.segments.map(function(e,t){return o.a.createElement(je,{labelText:e.labelText,startTime:parseFloat(e.startTime.toFixed(2)),endTime:parseFloat(e.endTime.toFixed(2)),segmentId:e.id,key:e.id,onUpdateLabel:function(e,t){return n.updateLabel(e,t)},onUpdateStartTime:function(e,t){return n.updateStartTime(e,t)},onUpdateEndTime:function(e,t){return n.updateEndTime(e,t)},onPlaySegment:function(e){return n.playSegment(e)},onRemoveSegment:function(e){return n.removeSegment(e)}})})},n.saveSegments=function(){n.props.onSaveSegmentChanges()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.renderSegments(),t=!this.props.czyZmieniono;return o.a.createElement(E,null,o.a.createElement("div",{className:"SegmentsEditor"},o.a.createElement("div",{className:"log"},o.a.createElement("div",{id:"segments"},o.a.createElement("h3",null,"Segmenty"),o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Etykieta"),o.a.createElement("th",null,"Pocz\u0105tek"),o.a.createElement("th",null,"Koniec"),o.a.createElement("th",null))),o.a.createElement("tbody",null,e)))),this.props.czyZmieniono?o.a.createElement(oe,{napis:"Zapisz zmiany segment\xf3w",iconType:"file",icon:null,customeStyle:{textAlign:"center",marginBottom:"20px"},disabled:t,whenClicked:this.saveSegments}):null))}}]),t}(r.Component),Te=Object(y.b)(function(e){return{}},function(e){return{}})(Ce),Oe=n(142),ke=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).saveChanges=function(){switch(n.props.toolType){case"VAD":console.log("VAD");break;case"DIA":console.log("DIA");break;case"REC":n.props.onSaveTranscription(n.props.containerForPreview,n.props.toolType,n.props.token,n.state.text);break;case"SEG":console.log("SEG")}},n.increasePlaybackSpeed=function(){var e=document.getElementById("audio");n.state.speedFactor<3&&(e.playbackRate=n.state.speedFactor+.5,n.setState({speedFactor:n.state.speedFactor+.5}))},n.decreasePlaybackSpeed=function(){var e=document.getElementById("audio");n.state.speedFactor>0&&(e.playbackRate=n.state.speedFactor-.5,n.setState({speedFactor:n.state.speedFactor-.5}))},n.togglePlaying=function(){n.state.isPlaying?(n.peaks.player.pause(),n.setState({isPlaying:!1})):(n.peaks.player.play(),n.setState({isPlaying:!0}))},n.rewind3secBack=function(){n.playBack(3)},n.rewind5secBack=function(){n.playBack(5)},n.playBack=function(e){var t=n.peaks.player.getCurrentTime()-e;t<0&&(t=0),n.peaks.player.seek(t),n.peaks.player.play(),n.setState({isPlaying:!0}),n.state.odliczanie&&(clearTimeout(n.state.odliczanie),n.setState({odliczanie:null}));var a=n.state.odliczanie;a=setTimeout(function(){n.peaks.player.pause(),n.setState({isPlaying:!1,odliczanie:null})},(1e3*e+100)/n.state.speedFactor),n.setState({odliczanie:a})},n.createPeaksInstance=function(e){return new Promise(function(t,n){ve.a.init(e,function(e,a){if(!e)return console.log("Peaks instance ready"),t(a);console.log("Problem with Peaks initialization"),n(e)})})},n.bindEventHandlers=function(e,t){document.querySelector("body").addEventListener("click",function(t){var a=t.target,r=a.getAttribute("data-action"),o=a.getAttribute("data-id");if("play-segment"===r){var i=e.segments.getSegment(o);e.player.playSegment(i)}else"remove-point"===r?e.points.removeById(o):"remove-segment"===r&&(e.segments.removeById(o),n.setState({czyZmienionoSegmenty:!0}))}),document.querySelector('[data-action="zoom-in"]').addEventListener("click",function(){e.zoom.zoomIn(),n.setState({currentZoom:e.zoom.getZoom()}),console.log(n.state.currentZoom)}),document.querySelector('[data-action="zoom-out"]').addEventListener("click",function(){e.zoom.zoomOut(),n.setState({currentZoom:e.zoom.getZoom()}),console.log(n.state.currentZoom)}),document.querySelector('[data-action="resize"]').addEventListener("click",function(){n.props.editorFullWidth(),console.log(n.props.ifFullScreen);var t=e.views.getView("zoomview");t&&t.fitToContainer();var a=e.views.getView("overview");a&&a.fitToContainer()}),document.querySelector('[data-action="play"]').addEventListener("click",function(){n.togglePlaying()}),e.on("segments.dragend",function(e,t){n.updateSegment(e),console.log("segments.dragend:",e,t)})},n.convertPeaksSegments=function(){return n.peaks.segments.getSegments().map(function(e){return{startTime:e.startTime,endTime:e.endTime,color:e.color,labelText:e.labelText,id:e.id,editable:e.editable}})},n.startPeaksLeaving=function(e,t,a){var r,o=(r={containers:{zoomview:document.getElementById("zoomview-container"),overview:document.getElementById("overview-container")},mediaElement:document.querySelector("audio"),dataUri:{arraybuffer:t},mediaUrl:e,zoomWaveformColor:"rgba(52, 152, 219, 1)",overviewWaveformColor:"rgba(52, 152, 219, 0.3)",overviewHighlightColor:"rgba(52, 152, 219, 0.4)",segmentColor:"rgba(57, 75, 85, 1)",randomizeSegmentColor:!1,segmentStartMarkerColor:"rgba(255, 87, 34, 1)",segmentEndMarkerColor:"rgba(255, 152, 0, 1)",keyboard:!0,nudgeIncrement:.1,zoomLevels:[128,256,512,1024,2048,4096],showPlayheadTime:!0,emitCueEvents:!0},Object(he.a)(r,"showPlayheadTime",!1),Object(he.a)(r,"segments",a),r);n.createPeaksInstance(o).then(function(e){e.setSource(o,function(t){t&&console.error("setSource error",t),n.peaks=e;var a=n.convertPeaksSegments();n.setState({currentSegments:a}),n.bindEventHandlers(n.peaks,o)})},n.errorHandler)},n.getDataFromContainer=function(e){e.owner,e.project,e.session,e.fileName;var t=e._id,a=n.props.token,r=[];switch(n.props.toolType){case"VAD":r=e.VADUserSegments;break;case"DIA":r=e.DIAUserSegments;break;case"REC":case"SEG":r=e.RECUserSegments}return void 0==r&&(r=[]),{audioPath:"https://mowa.clarin-pl.eu:8433/api/repoFiles/download/"+t+"/audio?api_key="+a,datPath:"https://mowa.clarin-pl.eu:8433/api/repoFiles/download/"+t+"/dat?api_key="+a,segments:r}},n.loadNewAudioToEditor=function(e){if(void 0!==e){var t=n.getDataFromContainer(e);console.log(t.audioPath),console.log(t.datPath),console.log(t.segments),n.startPeaksLeaving(t.audioPath,t.datPath,t.segments)}},n.errorHandler=function(e){console.error(e.message)},n.requestWaveformData=function(e){return fetch(e).then(function(e){return e.arrayBuffer()})},n.updateSource=function(e){if(n.peaks){var t=n.getDataFromContainer(e);n.setState({isLoading:!0}),n.requestWaveformData(t.datPath).then(function(a){return n.setState({isLoading:!1}),n.peaks.segments.removeAll(),{title:e.containerName,mediaUrl:t.audioPath,waveformData:{arraybuffer:a}}}).then(function(e){n.peaks.setSource(e,function(e){e&&console.log(e),n.peaks.segments.add(t.segments),n.setState({currentSegments:Object(m.a)(t.segments)})}),n.peaks.zoom.setZoom(n.state.currentZoom)})}},n.componentDidUpdate=function(e,t){if(e.containerForPreview!==n.props.containerForPreview)switch(n.setState({czyZmienionoSegmenty:!1,isPlaying:!1,speedFactor:1,isLoading:!1}),n.updateSource(n.props.containerForPreview),n.props.toolType){case"VAD":console.log("VAD");break;case"DIA":console.log("DIA");break;case"REC":n.loadTranscription();break;case"SEG":console.log("SEG")}n.props.transcriptionData?e.transcriptionData!==n.props.transcriptionData&&n.props.containerForPreview.ifREC&&n.setState({text:n.props.transcriptionData.blocks[0].data.text,transcriptHasChanged:!1}):n.setState({text:"",transcriptHasChanged:!1})},n.componentDidMount=function(){n.loadNewAudioToEditor(n.props.containerForPreview)},n.updateSegment=function(e){var t=n.peaks.segments.getSegments(),a=[],r=!0,o=!1,i=void 0;try{for(var s,c=t[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;l.id!=e.id&&(l.startTime>=e.startTime&&l.startTime<=e.endTime&&a.push({startTime:l.startTime,endTime:l.endTime,labelText:l.labelText,id:l.id}),l.startTime<=e.startTime&&l.startTime<=e.endTime&&l.endTime>=e.startTime&&l.endTime>=e.endTime&&a.push({startTime:l.startTime,endTime:l.endTime,labelText:l.labelText,id:l.id}),l.endTime>=e.startTime&&l.endTime<=e.endTime&&a.push({startTime:l.startTime,endTime:l.endTime,labelText:l.labelText,id:l.id}))}}catch(v){o=!0,i=v}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}if(a.length>0){for(var u=999999999999,d=0,p="Custom",E=0,f=a;E<f.length;E++){var h=f[E];h.startTime<=u&&(u=h.startTime),h.endTime>=d&&(d=h.endTime),p="Custom "+n.state.segmentCounter,n.peaks.segments.removeById(h.id)}e.startTime<=u&&(u=e.startTime),e.endTime>=d&&(d=e.endTime),n.peaks.segments.removeById(e.id),n.peaks.segments.add({startTime:u,endTime:d,editable:!0,color:"#394b55",labelText:p})}var g=n.convertPeaksSegments();n.setState({segments:Object(m.a)(g),czyZmienionoSegmenty:!0})},n.updateSegmentLabel=function(e,t){n.peaks.segments.getSegment(e).update({labelText:t}),n.setState({czyZmienionoSegmenty:!0}),console.log("update Segment Label "+e+" "+t)},n.updateSegmentStartTime=function(e,t){n.peaks.segments.getSegment(e).update({startTime:parseFloat(t)}),n.setState({czyZmienionoSegmenty:!0}),console.log("update Segment Start Time  "+e+" "+t)},n.updateSegmentEndTime=function(e,t){n.peaks.segments.getSegment(e).update({endTime:parseFloat(t)}),n.setState({czyZmienionoSegmenty:!0}),console.log("update Segment End Time "+e+" "+t)},n.saveSegmentChanges=function(){var e=n.convertPeaksSegments();switch(n.props.toolType){case"VAD":n.props.onSaveVADSegments(n.props.containerForPreview,n.props.toolType,n.props.token,e);break;case"DIA":n.props.onSaveDIASegments(n.props.containerForPreview,n.props.toolType,n.props.token,e);break;case"REC":console.log("REC");break;case"SEG":console.log("SEG")}},n.addSegment=function(){if(n.peaks){var e={startTime:n.peaks.player.getCurrentTime(),endTime:n.peaks.player.getCurrentTime()+3,labelText:"Segment "+n.state.segmentCounter,editable:!0};n.peaks.segments.add(e);n.convertPeaksSegments();n.updateSegment(e),n.setState({segmentCounter:n.state.segmentCounter+1})}},n.loadNextElement=function(){n.props.onLoadNextElement()},n.textChanged=function(e){n.setState({text:e.target.value,transcriptHasChanged:!0}),n.props.onTranscriptionChanged()},n.loadTranscription=function(){n.props.containerForPreview.ifREC?n.props.onLoadExistingTranscription(n.props.containerForPreview,n.props.toolType,n.props.token):n.setState({text:"",transcriptHasChanged:!1}),n.props.containerForPreview.ifDIA||n.props.containerForPreview.ifSEG||n.props.containerForPreview.ifVAD},n.openPreviewInEMU=function(){var e=n.props.containerForPreview,t=(e.owner,e.project,e.session,e.fileName,e._id),a=n.props.token,r=encodeURI("https://ips-lmu.github.io/EMU-webApp/?audioGetUrl="+("https://mowa.clarin-pl.eu:8433/api/repoFiles/download/"+t+"/audio?api_key="+a)+"&labelGetUrl="+("https://mowa.clarin-pl.eu:8433/api/repoFiles/download/"+t+"/SEGtextGrid?api_key="+a)+"&labelType=TEXTGRID");window.open(r,"_blank")},n.state={audioPath:"",datPath:"",segments:[],text:"",transcriptHasChanged:!1,isPlaying:!1,speedFactor:1,odliczanie:null,isLoading:!1,czyZmienionoSegmenty:!1,currentSegments:[],segmentCounter:1,currentZoom:1},n.audioPlayer=o.a.createRef(),n.peaks=null,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"onKeyDown",value:function(e,t,n){switch(n.key){case"alt+l":this.togglePlaying();break;case"alt+k":this.rewind3secBack();break;case"alt+j":this.rewind5secBack();break;case"alt+i":this.increasePlaybackSpeed();break;case"alt+o":this.decreasePlaybackSpeed();break;case"alt+n":this.loadNextElement();break;case"alt+m":this.saveChanges();break;default:console.log(t)}}},{key:"render",value:function(){var e=this,t=null;this.props.containerForPreview.ifSEG&&(t=o.a.createElement(oe,{napis:"Otw\xf3rz w EMU",iconType:"file",icon:null,customeStyle:{textAlign:"center",marginBottom:"20px"},disabled:!1,whenClicked:this.openPreviewInEMU}));var n=null;"REC"==this.props.toolType&&(n=o.a.createElement(we,{toolType:this.props.toolType,container:this.props.containerForPreview,onLoadNextElement:this.loadNextElement,text:this.state.text,onTextChanged:this.textChanged,onLoadTranscription:this.loadTranscription,onSaveChanges:this.saveChanges,transcriptHasChanged:this.state.transcriptHasChanged}));var a=null;!this.peaks||"VAD"!=this.props.toolType&&"DIA"!=this.props.toolType||this.state.currentSegments.length>0&&(console.log("UPDATE"),a=o.a.createElement(Te,{czyZmieniono:this.state.czyZmienionoSegmenty,segments:this.peaks.segments.getSegments(),onUpdateSegmentLabel:function(t,n){return e.updateSegmentLabel(t,n)},onUpdateSegmentStartTime:function(t,n){return e.updateSegmentStartTime(t,n)},onUpdateSegmentEndTime:function(t,n){return e.updateSegmentEndTime(t,n)},onSaveSegmentChanges:this.saveSegmentChanges}));var r=null;r=this.state.isPlaying?o.a.createElement(K.a,{icon:Z.s,className:"faIcon"}):o.a.createElement(K.a,{icon:Z.t,className:"faIcon"});var i=null;return i=""==this.props.containerForPreview?null:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"demo-controls"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{id:"controls"},o.a.createElement("button",{"data-tip":!0,"data-for":"fullscreen","data-action":"resize"},o.a.createElement(K.a,{icon:Z.h,className:"faIcon"})),o.a.createElement(ye.a,{id:"fullscreen",delayShow:500},o.a.createElement("span",null,"Full screen")),o.a.createElement("button",{"data-tip":!0,"data-for":"playpause","data-action":"play"},r),o.a.createElement(ye.a,{id:"playpause",delayShow:500},o.a.createElement("span",null,"Play/pause (Alt+l)")),o.a.createElement("button",{"data-tip":!0,"data-for":"rewind3","data-action":"back-3",onClick:this.rewind3secBack},o.a.createElement(K.a,{icon:Z.o,className:"faIcon"})," 3 sec."),o.a.createElement(ye.a,{id:"rewind3",delayShow:500},o.a.createElement("span",null,"Powt\xf3rz ostatnie 3 sek. (Alt+k)")),o.a.createElement("button",{"data-tip":!0,"data-for":"rewind5","data-action":"back-5",onClick:this.rewind5secBack},o.a.createElement(K.a,{icon:Z.o,className:"faIcon"})," 5 sec."),o.a.createElement(ye.a,{id:"rewind5",delayShow:500},o.a.createElement("span",null,"Powt\xf3rz ostatnie 5 sek. (Alt+j)")),o.a.createElement("button",{"data-tip":!0,"data-for":"increaseSpeed","data-action":"speed-up",onClick:this.increasePlaybackSpeed},o.a.createElement(K.a,{icon:Z.d,className:"faIcon"})," ",o.a.createElement(K.a,{icon:Z.q,className:"faIcon"})," ",o.a.createElement("span",{style:{fontSize:"0.7em",width:"25px",display:"inline-block"}},"x ",this.state.speedFactor)),o.a.createElement(ye.a,{id:"increaseSpeed",delayShow:500},o.a.createElement("span",null,"Szybciej (Alt+i)")),o.a.createElement("button",{"data-tip":!0,"data-for":"decreaseSpeed","data-action":"slow-down",onClick:this.decreasePlaybackSpeed},o.a.createElement(K.a,{icon:Z.d,className:"faIcon"})," ",o.a.createElement(K.a,{icon:Z.p,className:"faIcon"}),o.a.createElement("span",{style:{fontSize:"0.7em",width:"25px",display:"inline-block"}}," x ",this.state.speedFactor)),o.a.createElement(ye.a,{id:"decreaseSpeed",delayShow:500},o.a.createElement("span",null,"Wolniej (Alt+o)")),o.a.createElement("button",{"data-tip":!0,"data-for":"zoomin","data-action":"zoom-in"},o.a.createElement(K.a,{icon:Z.x,className:"faIcon"})," "),o.a.createElement(ye.a,{id:"zoomin",delayShow:500},o.a.createElement("span",null,"Przybli\u017c")),o.a.createElement("button",{"data-tip":!0,"data-for":"zoomout","data-action":"zoom-out"},o.a.createElement(K.a,{icon:Z.w,className:"faIcon"})," "),o.a.createElement(ye.a,{id:"zoomout",delayShow:500},o.a.createElement("span",null,"Oddal")),o.a.createElement("button",{"data-tip":!0,"data-for":"addSegment","data-action":"add-segment",onClick:this.addSegment},o.a.createElement(K.a,{icon:Z.n,className:"faIcon"})),o.a.createElement(ye.a,{id:"addSegment",delayShow:500},o.a.createElement("span",null,"Dodaj segment"))),o.a.createElement("h3",null,o.a.createElement("b",null,this.props.containerForPreview.containerName)),o.a.createElement("p",{style:{fontSize:"11px"}},this.props.containerForPreview._id)),o.a.createElement("div",{className:"col-12"},o.a.createElement("audio",{id:"audio",controls:!1,ref:this.audioPlayer},o.a.createElement("source",{src:this.state.audioPath}),"Your browser does not support the audio element.")))),o.a.createElement("div",{id:"waveform-container"},o.a.createElement("div",{id:"overview-container"}),o.a.createElement("div",{id:"zoomview-container"}))),o.a.createElement(Oe.a,{keyName:" alt+j, alt+k, alt+l, alt+i, alt+o,alt+n,alt+m",onKeyDown:this.onKeyDown.bind(this),filter:function(e){return!0}},o.a.createElement(E,null,this.state.isLoading?Jn():null,o.a.createElement("div",{className:"AudioEditor"},i,t,a,n)))}}]),t}(r.Component),Ae=Object(y.b)(function(e){return{token:e.homeR.token,transcriptionSaved:e.projectR.transcriptionSaved,transcriptionData:e.recR.transcriptionData,containerBinaryPreviewREC:e.repoR.containerBinaryPreviewREC,containerBinaryPreviewVAD:e.repoR.containerBinaryPreviewVAD,containerBinaryPreviewDIA:e.repoR.containerBinaryPreviewDIA,containerBinaryPreviewSEG:e.repoR.containerBinaryPreviewSEG,audioFileREC:e.repoR.containerAudioFileREC,audioFileVAD:e.repoR.containerAudioFileVAD,audioFileDIA:e.repoR.containerAudioFileDIA,audioFileSEG:e.repoR.containerAudioFileSEG}},function(e){return{openPreviewInEMU:function(t,n){return e(function(e,t){return function(n){w.a.get("/seg/openInEMU/"+e._id,{headers:{Authorization:"Bearer "+t}}).then(function(e){n(function(e){return{type:"OPEN_CONTAINER_IN_EMU_SUCCESS",dataForEMU:e}}(e))}).catch(function(e){n(function(e){return{type:"OPEN_CONTAINER_IN_EMU_FAILED",error:e}}(e))})}}(t,n))},onSaveVADSegments:function(t,n,a,r){return e(function(e,t,n,a){return function(r){console.log("zapisuje VAD segmenty"),w.a.put("/vad/saveSegments",{segments:a,toolType:t,container:e},{headers:{Authorization:"Bearer "+n}}).then(function(n){console.log(n),r(function(e,t,n,a){return{type:"SAVE_VAD_SEGMENTS_SUCCESS",message:e,containerId:n,updatedSegments:t,toolType:a}}(n.data.message,n.data.updatedSegments,e._id,t))}).catch(function(n){console.log(n),r(function(e,t,n){return{type:"SAVE_VAD_SEGMENTS_FAILED",error:e,containerId:t,toolType:n}}(n,e._id,t))})}}(t,n,a,r))},onSaveDIASegments:function(t,n,a,r){return e(function(e,t,n,a){return function(r){console.log("zapisuje DIA segmenty"),w.a.put("/dia/saveSegments",{segments:a,toolType:t,container:e},{headers:{Authorization:"Bearer "+n}}).then(function(n){console.log(n),r(function(e,t,n,a){return{type:"SAVE_DIA_SEGMENTS_SUCCESS",message:e,containerId:n,updatedSegments:t,toolType:a}}(n.data.message,n.data.updatedSegments,e._id,t))}).catch(function(n){console.log(n),r(function(e,t,n){return{type:"SAVE_DIA_SEGMENTS_FAILED",error:e,containerId:t,toolType:n}}(n,e._id,t))})}}(t,n,a,r))},onSaveTranscription:function(t,n,a,r){return e(function(e,t,n,a){return function(r){w.a.put("/recognition/saveTranscription",{transcription:a,toolType:t,container:e},{headers:{Authorization:"Bearer "+n}}).then(function(n){console.log(n),r(function(e,t,n){return{type:"SAVE_TRANSCRIPTION_SUCCESS",message:e,containerId:t,toolType:n}}(n.data.message,e._id,t))}).catch(function(n){r(function(e,t,n){return{type:"SAVE_TRANSCRIPTION_FAILED",error:e,containerId:t,toolType:n}}(n,e._id,t))})}}(t,n,a,r))},onTranscriptionChanged:function(){return e({type:"TRANSCRIPTION_CHANGED"})},onLoadExistingTranscription:function(t,n,a){return e(function(e,t,n){return function(t){w.a.get("/recognition/loadTranscription/"+e._id,{headers:{Authorization:"Bearer "+n}}).then(function(e){t(function(e){return{type:"LOAD_TRANSCRIPTION",transcriptData:e}}(e))}).catch(function(e){t(function(e){return{type:"LOAD_TRANSCRIPTION_FAILED",error:e}}(e))})}}(t,0,a))}}})(Object(v.g)(ke)),Pe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,editorFullWidth:!1},n.openModalHandler=function(){n.props.onOpenModalHandler()},n.closeModalHandler=function(){n.setState({modal:!1})},n.startBatchRecognition=function(){var e=n.props.containersForREC.map(function(e){return e.file}),t=n.props.containersForREC.map(function(e){return e.id});n.props.onStartBatchRecognition(e,t),n.closeModalHandler()},n.openContainerInPreview=function(e){n.props.openContainerInRecoPreview(e)},n.makeEditorFullWidth=function(){0==n.state.editorFullWidth?n.setState({editorFullWidth:!0}):n.setState({editorFullWidth:!1})},n.runRECinBatch=function(){for(var e=0;e<n.props.containersForREC.length;e++){var t=n.props.containersForREC[e];0==t.ifREC&&n.runSpeechRecognition(t,"REC",n.props.token)}},n.runSpeechRecognition=function(e,t,a){n.props.setContainerStatus(e._id,t,"progress"),n.props.runSpeechRecognition(e,a)},n.loadNextElement=function(){for(var e=0,t=0;t<n.props.containersForREC.length;t++){n.props.containersForREC[t]._id==n.props.containerForPreview._id&&(e=t)}e<n.props.containersForREC.length-1&&n.openContainerInPreview(n.props.containersForREC[e+1])},n.removeToolItem=function(e){n.props.onRemoveElementFromRECList(e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t="6 order-1",n="6 order-2";1==this.state.editorFullWidth?(t="12 order-2",n="12 order-1"):(t="6 order-1",n="6 order-2");var a=o.a.createElement(K.a,{icon:Z.j}),r=null;return this.props.containersForREC.length>0&&(r=this.props.containersForREC.map(function(t,n){return o.a.createElement(fe,{key:"key"+n,container:t,type:"REC",status:t.statusREC,openPreview:e.openContainerInPreview,runTool:function(t,n,a){return e.runSpeechRecognition(t,n,a)},onRemoveItem:e.removeToolItem,errorMessage:t.errorMessage})})),o.a.createElement(E,null,o.a.createElement(ne,{czyTopPart:"true",desc:o.a.createElement("div",null,o.a.createElement("div",null,"Przydatne skr\xf3ty klawiaturowe podczas tworzenia transkrypcji to: "),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+l]")," - play/pausa "),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+k]")," - powt\xf3rz 3 sek."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+j]")," - powt\xf3rz 5 sek."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+i]")," - przy\u015bpiesz."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+o]")," - zwolnij."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+m]")," - zapisz transkrypcje."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+n]")," - za\u0142aduj kolejny plik."),o.a.createElement("div",null,"Mo\u017cesz transkrybowa\u0107 nie odrywaj\u0105c r\u0105k od pola tekstowego!"))},o.a.createElement(oe,{napis:"Uruchom rozpoznawanie dla wszystkich",iconType:"file",icon:a,customeStyle:null,disabled:!1,whenClicked:this.runRECinBatch})),o.a.createElement(ee,null),o.a.createElement("section",{className:"Content","data-scrollbar":!0},o.a.createElement("div",{className:["container-fluid","RecognitionTool"].join(" ")},o.a.createElement("div",{className:"tool-desc"},o.a.createElement("h2",null,"Transkrypcje"),o.a.createElement("p",null,"Zamiana nagrania mowy na zapis ortograficzny.")),o.a.createElement("div",{className:"tool-body"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-"+t},o.a.createElement("div",{className:"file-list"},r)),o.a.createElement("div",{className:"col-md-"+n},""!=this.props.containerForPreview?o.a.createElement(Ae,{containerForPreview:this.props.containerForPreview,editorFullWidth:this.makeEditorFullWidth,onLoadNextElement:this.loadNextElement,toolType:"REC"}):null)))),o.a.createElement(te,null)))}}]),t}(r.Component),De=Object(y.b)(function(e){return{containersForREC:e.recR.containersForREC,modalDisplay:e.projectR.modal,refusedFileList:e.recR.refusedFileList,containerForPreview:e.recR.recoContainerForPreview,token:e.homeR.token}},function(e){return{openContainerInRecoPreview:function(t){return e(function(e){return{type:"ADD_CONTAINER_TO_PREVIEW_RECO",containerForPreview:e}}(t))},onDrop:function(t){return e(function(e){return{type:"DROP_FILES",files:e}}(t))},onOpenModalHandler:function(){return e({type:"OPEN_MODAL_PROJECT"})},onCloseModalHandler:function(){return e({type:"CLOSE_MODAL_PROJECT"})},onStartBatchRecognition:function(t,n){return e(function(e,t){return function(n){for(var a=new FormData,r=0;r<e.length;r++)a.append("audioFiles",e[r]);a.append("audioFilesIds",t),w.a.post("/recognition/multipleFiles",a,{headers:{"content-type":"multipart/form-data"}}).then(function(e){}).catch(function(e){console.log(e)})}}(t,n))},onSetRefusionFiles:function(t){return e({type:"REFUSE_RECO_FILES",refusedFileList:t})},setContainerStatus:function(t,n,a){return e(j(t,n,a))},runSpeechRecognition:function(t,n){return e(function(e,t){return function(n){w.a.put("/repoFiles/runSpeechRecognition/"+e._id,{containerId:e._id},{headers:{Authorization:"Bearer "+t}}).then(function(t){var a,r;n((a=e._id,r=t.data.toolType,{type:"REPO_RUN_SPEECH_RECOGNITION_DONE",containerId:a,toolType:r}))}).catch(function(t){var a,r,o;t.response?(a=t.response.data.message,r=t.response.data.containerId,o=t.response.data.toolType):(a="Co\u015b posz\u0142o nie tak z rozpoznawaniem mowy",r=e._id,o="REC"),n(function(e,t,n){return{type:"REPO_RUN_SPEECH_RECOGNITION_FAILED",containerId:e,toolType:t,messsage:n}}(r,o,a))})}}(t,n))},onRemoveElementFromRECList:function(t){return e(function(e){return{type:"REMOVE_RECOGNITION_ITEM",container:e}}(t))}}})(Pe),Re=(n(224),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,editorFullWidth:!1},n.openContainerInPreview=function(e){n.props.openContainerInAlignPreview(e)},n.makeEditorFullWidth=function(){0==n.state.editorFullWidth?n.setState({editorFullWidth:!0}):n.setState({editorFullWidth:!1})},n.runSEGinBatch=function(){for(var e=0;e<n.props.containersForSEG.length;e++){var t=n.props.containersForSEG[e];0==t.ifSEG&&n.runSpeechSegmentation(t,"SEG",n.props.token)}},n.runSpeechSegmentation=function(e,t,a){n.props.setContainerStatus(e._id,t,"progress"),n.props.runSpeechSegmentation(e,a)},n.loadNextElement=function(){for(var e=0,t=0;t<n.props.containersForSEG.length;t++){n.props.containersForSEG[t]._id==n.props.containerForPreview._id&&(e=t)}e<n.props.containersForSEG.length-1&&n.openContainerInPreview(n.props.containersForSEG[e+1])},n.removeToolItem=function(e){n.props.onRemoveSegmentationItem(e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t="6 order-1",n="6 order-2";1==this.state.editorFullWidth?(t="12 order-2",n="12 order-1"):(t="6 order-1",n="6 order-2");var a=o.a.createElement(K.a,{icon:Z.d}),r=this.props.containersForSEG.map(function(t,n){return o.a.createElement(fe,{key:"key"+n,container:t,type:"SEG",status:t.statusSEG,openPreview:e.openContainerInPreview,runTool:function(t,n,a){return e.runSpeechSegmentation(t,n,a)},onRemoveItem:e.removeToolItem,errorMessage:t.errorMessage})});return o.a.createElement(E,null,o.a.createElement(ne,{czyTopPart:"true",desc:o.a.createElement("div",null,o.a.createElement("div",null,"Przydatne skr\xf3ty klawiaturowe: "),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+l]")," - play/pausa "),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+k]")," - powt\xf3rz 3 sek."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+j]")," - powt\xf3rz 5 sek."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+i]")," - przy\u015bpiesz."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+o]")," - zwolnij."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+n]")," - za\u0142aduj kolejny plik."))},o.a.createElement(oe,{napis:"Uruchom segmentacje dla wszystkich",icon:a,customeStyle:null,disabled:!1,whenClicked:this.runSEGinBatch})),o.a.createElement(ee,null),o.a.createElement("section",{className:"Content","data-scrollbar":!0},o.a.createElement("div",{className:["container-fluid","SegmentTool"].join(" ")},o.a.createElement("div",{className:"tool-desc"},o.a.createElement("h2",null,"Segmentacja plik\xf3w audio"),o.a.createElement("p",null,"Dopasowanie czasowe tekstu do nagrania. Podzia\u0142 nagrania na segmenty (wyrazy i fonemy).")),o.a.createElement("div",{className:"tool-body"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-"+t},o.a.createElement("div",{className:"file-list"},r)),o.a.createElement("div",{className:"col-md-"+n},""!=this.props.containerForPreview?o.a.createElement(Ae,{containerForPreview:this.props.containerForPreview,editorFullWidth:this.makeEditorFullWidth,onLoadNextElement:this.loadNextElement,toolType:"SEG"}):null)))),o.a.createElement(te,null)))}}]),t}(r.Component)),Ne=Object(y.b)(function(e){return{containersForSEG:e.segR.containersForSEG,audioList:e.segR.audioList,txtList:e.segR.txtList,refusedAudioFileList:e.segR.refusedAudioFileList,refusedTxtFileList:e.segR.refusedTxtFileList,modalDisplay:e.projectR.modal,ifRefusedAudio:e.segR.ifRefusedAudio,containerForPreview:e.segR.alignContainerForPreview,token:e.homeR.token}},function(e){return{runSpeechSegmentation:function(t,n){return e(function(e,t){return function(n){w.a.put("/repoFiles/runSpeechSegmentation/"+e._id,{containerId:e._id},{headers:{Authorization:"Bearer "+t}}).then(function(t){var a,r,o;n((a=t.message,r=e._id,o=t.data.toolType,{type:"REPO_RUN_SPEECH_SEGMENTATION_DONE",containerId:r,toolType:o,message:a}))}).catch(function(e){var t=e.response.data.message,a=e.response.data.containerId,r=e.response.data.toolType;n(function(e,t,n){return{type:"REPO_RUN_SPEECH_SEGMENTATION_FAILED",containerId:t,toolType:n,message:e}}(t,a,r))})}}(t,n))},setContainerStatus:function(t,n,a){return e(j(t,n,a))},openContainerInAlignPreview:function(t){return e(function(e){return{type:"ADD_CONTAINER_TO_PREVIEW_ALIGN",containerForPreview:e}}(t))},onRemoveSegmentationItem:function(t){return e(function(e){return{type:"REMOVE_RECOGNITION_ITEM",container:e}}(t))}}})(Re),_e=(n(225),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,editorFullWidth:!1},n.openContainerInPreview=function(e){n.props.openContainerInVADPreview(e)},n.makeEditorFullWidth=function(){0==n.state.editorFullWidth?n.setState({editorFullWidth:!0}):n.setState({editorFullWidth:!1})},n.runVADinBatch=function(){for(var e=0;e<n.props.VADItems.length;e++){var t=n.props.VADItems[e];0==t.ifVAD&&n.runSpeechVoiceActivityDetection(t,"VAD",n.props.token)}},n.runSpeechVoiceActivityDetection=function(e,t,a){n.props.setContainerStatus(e._id,t,"progress"),n.props.runSpeechVoiceActivityDetection(e,a)},n.loadNextElement=function(){for(var e=0,t=0;t<n.props.VADItems.length;t++){n.props.VADItems[t]._id==n.props.containerForPreview._id&&(e=t)}e<n.props.VADItems.length-1&&n.openContainerInPreview(n.props.VADItems[e+1])},n.removeToolItem=function(e){n.props.onRemoveElementFromVADList(e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t="6 order-1",n="6 order-2";1==this.state.editorFullWidth?(t="12 order-2",n="12 order-1"):(t="6 order-1",n="6 order-2");var a=o.a.createElement(K.a,{icon:Z.y}),r=this.props.VADItems.map(function(t,n){return o.a.createElement(fe,{key:"key"+n,container:t,type:"VAD",status:t.statusVAD,openPreview:e.openContainerInPreview,runTool:function(t,n,a){return e.runSpeechVoiceActivityDetection(t,n,a)},onRemoveItem:e.removeToolItem,errorMessage:t.errorMessage})});return o.a.createElement(E,null,o.a.createElement(ne,{czyTopPart:"true",desc:o.a.createElement("div",null,o.a.createElement("div",null,"Przydatne skr\xf3ty klawiaturowe: "),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+l]")," - play/pausa "),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+k]")," - powt\xf3rz 3 sek."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+j]")," - powt\xf3rz 5 sek."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+i]")," - przy\u015bpiesz."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+o]")," - zwolnij."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+n]")," - za\u0142aduj kolejny plik."))},o.a.createElement(oe,{napis:"Uruchom detekcje mowy dla wszystkich",icon:a,customeStyle:null,disabled:!1,whenClicked:this.runVADinBatch})),o.a.createElement(ee,null),o.a.createElement("section",{className:"Content","data-scrollbar":!0},o.a.createElement("div",{className:["container-fluid","SegmentTool"].join(" ")},o.a.createElement("div",{className:"tool-desc"},o.a.createElement("h2",null,"Detekcja mowy"),o.a.createElement("p",null,"Narz\u0119dzie zaznacza w sygnale segmenty zawieraj\u0105ce mow\u0119.")),o.a.createElement("div",{className:"tool-body"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-"+t},o.a.createElement("div",{className:"file-list"},r)),o.a.createElement("div",{className:"col-md-"+n},""!=this.props.containerForPreview?o.a.createElement(Ae,{containerForPreview:this.props.containerForPreview,editorFullWidth:this.makeEditorFullWidth,onLoadNextElement:this.loadNextElement,toolType:"VAD"}):null)))),o.a.createElement(te,null)))}}]),t}(r.Component)),Fe=Object(y.b)(function(e){return{VADItems:e.vadR.containersForVAD,modalDisplay:e.projectR.modal,ifRefusedAudio:e.segR.ifRefusedAudio,containerForPreview:e.vadR.vadContainerForPreview,token:e.homeR.token}},function(e){return{openContainerInVADPreview:function(t){return e(function(e){return{type:"ADD_CONTAINER_TO_PREVIEW_VAD",containerForPreview:e}}(t))},runSpeechVoiceActivityDetection:function(t,n){return e(function(e,t){return function(n){w.a.put("/repoFiles/runSpeechVAD/"+e._id,{},{headers:{Authorization:"Bearer "+t}}).then(function(e){var t,a,r;n((t=e.data.containerId,a=e.data.toolType,r=e.data.VADSegments,e.data.message,{type:"REPO_RUN_SPEECH_VAD_DONE",containerId:t,toolType:a,VADSegments:r}))}).catch(function(e){var t=e.response.data.message,a=e.response.data.containerId,r=e.response.data.toolType;n(function(e,t,n){return{type:"REPO_RUN_SPEECH_VAD_FAILED",containerId:e,toolType:t,message:n}}(a,r,t))})}}(t,n))},setContainerStatus:function(t,n,a){return e(j(t,n,a))},onRemoveElementFromVADList:function(t){return e(function(e){return{type:"REMOVE_RECOGNITION_ITEM",container:e}}(t))}}})(_e),ze=(n(226),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,editorFullWidth:!1},n.openContainerInPreview=function(e){n.props.openContainerInDIAPreview(e)},n.makeEditorFullWidth=function(){0==n.state.editorFullWidth?n.setState({editorFullWidth:!0}):n.setState({editorFullWidth:!1})},n.runDIAinBatch=function(){for(var e=0;e<n.props.containersForDIA.length;e++){var t=n.props.containersForDIA[e];0==t.ifDIA&&n.runSpeechDiarization(t,"DIA",n.props.token)}},n.runSpeechDiarization=function(e,t,a){n.props.setContainerStatus(e._id,t,"progress"),n.props.runSpeechDiarization(e,a)},n.loadNextElement=function(){for(var e=0,t=0;t<n.props.containersForDIA.length;t++){n.props.containersForDIA[t]._id==n.props.containerForPreview._id&&(e=t)}e<n.props.containersForDIA.length-1&&n.openContainerInPreview(n.props.containersForDIA[e+1])},n.removeToolItem=function(e){n.props.onRemoveElementFromDIAList(e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t="6 order-1",n="6 order-2";1==this.state.editorFullWidth?(t="12 order-2",n="12 order-1"):(t="6 order-1",n="6 order-2");var a=o.a.createElement(K.a,{icon:Z.f}),r=this.props.containersForDIA.map(function(t,n){return o.a.createElement(fe,{key:"key"+n,container:t,type:"DIA",status:t.statusDIA,openPreview:e.openContainerInPreview,runTool:function(t,n,a){return e.runSpeechDiarization(t,n,a)},onRemoveItem:e.removeToolItem,errorMessage:t.errorMessage})});return o.a.createElement(E,null,o.a.createElement(ne,{czyTopPart:"true",desc:o.a.createElement("div",null,o.a.createElement("div",null,"Przydatne skr\xf3ty klawiaturowe: "),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+l]")," - play/pausa "),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+k]")," - powt\xf3rz 3 sek."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+j]")," - powt\xf3rz 5 sek."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+i]")," - przy\u015bpiesz."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+o]")," - zwolnij."),o.a.createElement("div",null," ",o.a.createElement("b",null,"[Alt+n]")," - za\u0142aduj kolejny plik."))},o.a.createElement(oe,{napis:"Uruchom diaryzacj\u0119 dla wszystkich",icon:a,customeStyle:null,disabled:!1,whenClicked:this.runDIAinBatch})),o.a.createElement(ee,null),o.a.createElement("section",{className:"Content","data-scrollbar":!0},o.a.createElement("div",{className:["container-fluid","SegmentTool"].join(" ")},o.a.createElement("div",{className:"tool-desc"},o.a.createElement("h2",null,"Diaryzacja"),o.a.createElement("p",null,"Narz\u0119dzie dzieli sygna\u0142 na segmenty m\xf3wione przez poszczeg\xf3lnych m\xf3wc\xf3w. M\xf3wcy nie s\u0105 identyfikowani, jedynie numerowani po kolei.")),o.a.createElement("div",{className:"tool-body"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-"+t},o.a.createElement("div",{className:"file-list"},r)),o.a.createElement("div",{className:"col-md-"+n},""!=this.props.containerForPreview?o.a.createElement(Ae,{containerForPreview:this.props.containerForPreview,editorFullWidth:this.makeEditorFullWidth,onLoadNextElement:this.loadNextElement,toolType:"DIA"}):null)))),o.a.createElement(te,null)))}}]),t}(r.Component)),Le=Object(y.b)(function(e){return{containersForDIA:e.diaR.containersForDIA,modalDisplay:e.projectR.modal,ifRefusedAudio:e.segR.ifRefusedAudio,containerForPreview:e.diaR.diaContainerForPreview,token:e.homeR.token}},function(e){return{openContainerInDIAPreview:function(t){return e(function(e){return{type:"ADD_CONTAINER_TO_PREVIEW_DIA",containerForPreview:e}}(t))},runSpeechDiarization:function(t,n){return e(function(e,t){return function(n){w.a.put("/repoFiles/runSpeechDiarization/"+e._id,{containerId:e._id},{headers:{Authorization:"Bearer "+t}}).then(function(e){var t,a,r;n((t=e.data.containerId,a=e.data.toolType,r=e.data.DIAsegments,{type:"REPO_RUN_SPEECH_DIARIZATION_DONE",containerId:t,toolType:a,DIAsegments:r}))}).catch(function(e){var t=e.response.data.message,a=e.response.data.containerId,r=e.response.data.toolType;n(function(e,t,n){return{type:"REPO_RUN_SPEECH_DIARIZATION_FAILED",containerId:e,toolType:t,message:n}}(a,r,t))})}}(t,n))},setContainerStatus:function(t,n,a){return e(j(t,n,a))},onRemoveElementFromDIAList:function(t){return e(function(e){return{type:"REMOVE_RECOGNITION_ITEM",container:e}}(t))}}})(ze),xe=(n(227),n(228),{position:"relative"}),Ue={position:"absolute",top:"0px",left:"0px",right:"0px",bottom:"0px",width:"100%",height:"100%",color:"#3498db",backgroundColor:"rgba(255,255,255,0.9)",border:"4px dotted #3498db",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},Me=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={drag:!1},n.dropRef=o.a.createRef(),n.handleDrag=function(e){console.log("handleDrag"),e.preventDefault(),e.stopPropagation()},n.handleDragIn=function(e){console.log("handleDragIn "+n.dragCounter),e.preventDefault(),e.stopPropagation(),n.dragCounter++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&n.setState({drag:!0})},n.handleDragOut=function(e){console.log("handleDragOut "+n.dragCounter),e.preventDefault(),e.stopPropagation(),n.dragCounter--,0===n.dragCounter&&n.setState({drag:!1})},n.handleDrop=function(e){if(console.log("handleDrop"),e.preventDefault(),e.stopPropagation(),n.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(n.props.whenDropped(e.dataTransfer.files),e.dataTransfer.clearData(),n.dragCounter=0),e.dataTransfer.getData("fileId").length>0){var t={fileURL:e.dataTransfer.getData("fileURL"),fileSize:e.dataTransfer.getData("fileSize"),fileId:e.dataTransfer.getData("fileId")};n.props.whenDropped(t),e.dataTransfer.clearData()}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.dropRef.current;this.dragCounter=0,e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop)}},{key:"componentWillUnmount",value:function(){var e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)}},{key:"render",value:function(){return o.a.createElement("div",{className:"DragAndDrop folder",style:xe,ref:this.dropRef},this.state.drag?o.a.createElement("div",{className:"dropIndication",style:Ue},o.a.createElement("h2",null,"Upu\u015b\u0107 pliki tutaj")):null,this.props.children)}}]),t}(r.Component),Ve=(n(229),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"DropFilesArea"},o.a.createElement("div",{id:"react-file-drop"},o.a.createElement("div",{className:"uploadFromDiskArea"},o.a.createElement("h2",null,this.props.mainTitle),o.a.createElement("p",null,this.props.desc),this.props.allowUploadLocalFiles?o.a.createElement("div",null,o.a.createElement("input",{id:"file-input",type:"file",multiple:this.props.multipleFiles,onChange:this.props.whenFilesChose}),o.a.createElement("i",{className:"fas fa-upload"})):null)))}}]),t}(r.Component)),Ge=(n(230),n(231),n(49)),He=n(128),Be=n.n(He),We=(n(267),n(268),{controls:!0,aspectRatio:"32:9",fluid:!0,responsive:!0,liveui:!0,scrubbing:!0,controlBar:{fullscreenToggle:!1,currentTimeDisplay:!0,timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!0,volumePanel:!0},plugins:{wavesurfer:{src:"",msDisplayMax:10,debug:!1,waveColor:"#6f8796",progressColor:"#394b55",cursorColor:"#394b55",hideScrollbar:!0,audioRate:1,partialRender:!0,responsive:!0}}}),Je=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={fileToPreviewURL:n.props.fileToPreview,blokada:!1},n.initializePreview=function(e){We.plugins.wavesurfer.src=e,n.player=Object(Ge.default)(n.audioNode,Object(h.a)({},We),function(){var e="Using video.js "+Ge.default.VERSION+" with videojs-wavesurfer "+Ge.default.getPluginVersion("wavesurfer")+" and wavesurfer.js "+Be.a.VERSION;Ge.default.log(e)}),n.player.on("waveReady",function(e){console.log("waveform: ready!")}),n.player.on("ratechange",function(e){console.log("zmienilem speed!")}),n.player.on("playbackFinish",function(e){console.log("playback finished.")}),n.player.on("error",function(e,t){console.error(t)})},n.setFileToPreview=function(e){n.player&&(console.log("laduje nowy plik"),n.player.wavesurfer().load(e))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log("Component Did Mount"),this.initializePreview(this.state.fileToPreviewURL)}},{key:"componentWillUnmount",value:function(){this.player&&(this.player.wavesurfer().destroy(),this.player.dispose())}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this;return void 0!=this.player&&this.setFileToPreview(this.state.fileToPreviewURL),o.a.createElement("div",{"data-vjs-player":!0},o.a.createElement("audio",{id:"myAudio",ref:function(t){return e.audioNode=t},className:"video-js vjs-default-skin"}))}}]),t}(r.Component),Ke=null,Ze=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={audioFileURL:null,txtFileURL:null},n.componentDidMount=function(){},n.componentWillUnmount=function(){},n.getExt=function(e){return null!=e.match(/(?:.+..+[^\/]+$)/gi)?e.split(".").slice(-1)[0]:"null"},n.txtAreaChangedHandler=function(e){n.props.onUpdateTxtArea(e.currentTarget.value,null)},n.handleDropAudio=function(e){var t=e.fileURL;console.log(t);e.fileId;n.setState({audioFileURL:t})},n.handleDropTxt=function(e){var t=e.fileURL;e.fileId;n.setState({txtFileURL:t})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"render",value:function(){var e;console.log("RENDER TRANSCRIPTION TOOL"),Ke=o.a.createElement(Je,{fileToPreview:this.state.audioFileURL});o.a.createElement("p",{style:{fontWeight:"bold"}},"Podgld pliku txt",o.a.createElement("span",{style:{fontSize:"bigger"}},this.props.txtfileName)),o.a.createElement("p",{style:{fontWeight:"bold"}},"Podgld pliku audio ",o.a.createElement("span",{style:{fontSize:"bigger"}},this.props.audiofileName));return o.a.createElement(E,null,o.a.createElement(ne,{czyTopPart:"true",desc:"W tym miejscu istnieje mo\u017cliwo\u015b\u0107 podgl\u0105du wyniku wykonywanych us\u0142ug oraz od\u0142uchania plik\xf3w d\u017awi\u0119kowych z repozytorium"}),o.a.createElement(ee,null),o.a.createElement("section",{className:"Content","data-scrollbar":!0},o.a.createElement("div",{className:["container-fluid","TranscriptTool"].join(" ")},o.a.createElement("div",{className:"tool-desc"}),o.a.createElement("div",{className:"tool-body"},o.a.createElement(Me,{whenDropped:this.handleDropAudio},null!=this.state.audioFileURL?Ke:o.a.createElement(Ve,{whenFilesChose:this.handleDropAudio,mainTitle:"Przeci\u0105gnij plik audio z Repozytorium",multipleFiles:!1,allowUploadLocalFiles:!1,desc:"aby wy\u015bwietli\u0107 jego podgl\u0105d"})),o.a.createElement("hr",null),o.a.createElement(Me,{whenDropped:this.handleDropTxt},null!=this.state.txtFileURL?o.a.createElement("div",{className:"form-group"},o.a.createElement("textarea",(e={className:"form-control"},Object(he.a)(e,"className","TranskriptInput"),Object(he.a)(e,"placeholder","Przeci\u0105gnij i upu\u015b\u0107 plik tekstowy"),Object(he.a)(e,"value",this.props.txtContent),Object(he.a)(e,"onChange",this.txtAreaChangedHandler),e))):o.a.createElement(Ve,{whenFilesChose:this.handleDropTxt,mainTitle:"Przeci\u0105gnij plik txt z Repozytorium",multipleFiles:!1,allowUploadLocalFiles:!1,desc:"aby go edytowa\u0107"})))),o.a.createElement(te,null)))}}]),t}(r.Component);Object(y.b)(function(e){return{txtContent:e.previewR.txtContent,txtDisplayed:e.previewR.txtDisplayed,txtfileName:e.previewR.txtfileName,txtFileUrl:e.previewR.txtFileUrl,audiofileName:e.previewR.audiofileName,audioDisplayed:e.previewR.audioDisplayed,audioFileUrl:e.previewR.audioFileUrl,waveSurferInitialized:e.previewR.waveSurferInitialized,playing:e.previewR.playing}},function(e){return{onUpdateTxtArea:function(t,n){return e({type:"UPDATE_TXT_PREVIEW",newContent:t,fileName:n})},onUpdateAudioArea:function(t){return e(function(e){return{type:"UPDATE_AUDIO_PREVIEW",fileKey:e}}(t))},onWeveSurferInitialized:function(t){return e(function(e){return{type:"WAVESURFER_INITIALIZED",ifYes:e}}(t))},onTooglePlaying:function(){return e({type:"TOGGLE_PLAYING_PREVIEW"})},onAudioDisplayed:function(t){return e({type:"CHANGE_AUDIO_DISPLAYED",ifYes:t})}}})(Object(v.g)(Ze)),n(270);function qe(e){return console.log(e),null!=e.match(/(?:.+..+[^\/]+$)/gi)?e.split(".").slice(-1):"null"}function Xe(e){for(var t=[],n=-1;(n=e.indexOf("/",n+1))>=0;)t.push(n);return e.substring(t[4]+1)}for(var Ye=n(143),$e={},Qe=0,et=Object.entries({Audio:["mp3","MP3","ogg","OGG","wav","WAV","flac","FLAC"]});Qe<et.length;Qe++){var tt=et[Qe],nt=Object(Ye.a)(tt,2),at=nt[0],rt=nt[1],ot=!0,it=!1,st=void 0;try{for(var ct,lt=rt[Symbol.iterator]();!(ot=(ct=lt.next()).done);ot=!0){var ut=ct.value;$e[ut]=at}}catch(qn){it=!0,st=qn}finally{try{ot||null==lt.return||lt.return()}finally{if(it)throw st}}}n(271);var dt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={url:null,fileKey:null,txtContent:"",txtLoaded:!1},n.load=function(e){var t=Xe(e);n.setState({url:e,fileKey:t},function(){fetch(n.state.url).then(function(e){e.text().then(function(e){n.setState({txtContent:e,txtLoaded:!0})})}).catch(function(e){console.log(e)})})},n.componentDidMount=function(){n.load(n.props.textURL)},n.txtAreaChangedHandler=function(e){n.setState({txtContent:e.currentTarget.value})},n.saveEditedFile=function(){n.props.onSaveEditedFileHandler(n.props.userId,n.props.projectId,n.props.token,n.state.fileKey,n.state.txtContent)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=!0;return this.state.txtLoaded&&(t=!1),this.props.editTxtFileOK&&(e=o.a.createElement("button",{type:"button",disabled:t,className:"btn btn-success",onClick:this.props.whenClose},"Success")),o.a.createElement(E,null,o.a.createElement("textarea",{className:"textEditPreview",placeholder:"Zaznacz plik txt w repozytorium",value:this.state.txtContent,onChange:this.txtAreaChangedHandler}),o.a.createElement("button",{type:"button",disabled:t,className:"btn btn-primary",onClick:this.saveEditedFile},"Save"),e)}}]),t}(r.Component),pt=Object(y.b)(function(e){return{editTxtFileOK:e.repoR.editTxtFileOK,userId:e.homeR.userId,projectId:e.projectR.currentProjectID,token:e.homeR.token}},function(e){return{onSaveEditedFileHandler:function(t,n,a,r,o){return e(function(e,t,n,a,r){return console.log("UPDATE TXT FILE:"+a),function(o){w.a.put("/repoFiles/editTxtFile/",{key:a,newContent:r,userId:e,projectId:t},{headers:{Authorization:"Bearer "+n}}).then(function(e){var t;console.log(e),o((t=e.data.key,e.data.message,{type:"REPO_EDIT_TXT_SUCCESS",file:t}))}).catch(function(e){o({type:"REPO_EDIT_TXT_FAILED",file:e})})}}(t,n,a,r,o))}}})(dt),mt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.fileToPreview,t=qe(e)[0],n=(Xe(e),null);return"Audio"===$e[t]?("Audio",n=o.a.createElement(Je,{fileToPreview:e})):"Text"===$e[t]?("Text",n=o.a.createElement(pt,{textURL:e,whenClose:this.props.onClose})):("Unknown",n=o.a.createElement("p",null,"Nieznany typ pliku!")),o.a.createElement(E,null,n)}}]),t}(r.Component),Et=n(129),ft=n.n(Et),ht=n(350),gt=n(347),vt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={openPreview:!1,modal:!1,fileToPreview:"",actionType:null,folderToUpload:"",filesToUpload:[],refusedFiles:[]},n.onStartUpload=function(){n.props.onUploadFiles(n.state.filesToUpload,n.state.folderToUpload,n.props.currentProjectOwner,n.props.currentProjectID,n.props.token)},n.handleDrop=function(e){console.log("HANDLE DROP");var t=[],a=[],r=[];if(e instanceof FileList){console.log("rozpoznalem FILELIST");for(var o=0;o<e.length;o++){var i=e[o],s=qe(i.name)[0];$e.hasOwnProperty(s)&&"Audio"==$e[s]?a.push(i):r.push(i)}}else if(null!=e.currentTarget&&e.currentTarget instanceof Element){console.log("rozpoznalem Element");var c=e.currentTarget;for(o=0;o<c.files.length;o++){var l=qe(c.files[o].name)[0];$e.hasOwnProperty(l)&&"Audio"==$e[l]?a.push(c.files[o]):r.push(c.files[o])}}r.length,Array.from(a).forEach(function(e){var n=Object.assign({},e);n.file=e,n.status="toload",n.loadedperc=0,n.from="local",n.id=ft.a.v4(),t.push(n)}),console.log(a),n.setState({filesToUpload:a,refusedFiles:r})},n.handleCreateFolder=function(e){n.props.onHandleCreateFolder(e,n.props.currentProjectID,n.props.currentProjectOwner,n.props.token)},n.handleCreateFiles=function(e,t){n.props.onHandleCreateFiles(e,t)},n.handleRenameFolder=function(e,t){n.props.onHandleRenameFolder(e,t,n.props.currentProjectID,n.props.currentProjectOwner,n.props.token)},n.handleRenameFile=function(e,t){n.props.onHandleRenameFile(e,t,n.props.currentProjectID,n.props.currentProjectOwner,n.props.token)},n.handleDeleteFolder=function(e){n.props.onHandleDeleteFolder(e,n.props.currentProjectID,n.props.currentProjectOwner,n.props.token)},n.handleDeleteFile=function(e){n.props.onHandleDeleteFile(e,n.props.currentProjectID,n.props.currentProjectOwner,n.props.token)},n.handleDownloadFile=function(e){n.props.onHandleDownloadFile(e,n.props.currentProjectID,n.props.currentProjectOwner,n.props.token)},n.handleUploadFiles=function(e){n.props.onOpenModalHandler(),n.setState({actionType:"Upload",folderToUpload:e}),n.props.onUploadFilesModalOpen()},n.handleSelect=function(e){console.log("handleSelect"),console.log(e)},n.handleSelectFile=function(e){console.log("handleSelectFile"),console.log(e)},n.handleSelectFolder=function(e){console.log("handleSelectFolder"),console.log(e)},n.handlePreviewOpen=function(e){var t=!0;if(!n.props.location.pathname.includes("preview")){var a=n.props.match.url+"/preview";t=!1,n.props.history.push({pathname:a})}var r=qe(e.url)[0];"txt"===r||"ctm"===r||"zip"===r||"json"===r||"TXT"===r||"CTM"===r||"ZIP"===r||"JSON"===r?e.url!==n.props.txtFileUrl&&n.props.onOpenTxtFileToPreview(e,t):"wav"!==r&&"mp3"!==r&&"au"!==r&&"WAV"!==r&&"MP3"!==r&&"AU"!==r||e.url!==n.props.audioFileUrl&&n.props.onOpenAudioFileToPreview(e,t)},n.handlePreviewClose=function(e){console.log("handlePreviewClose"),console.log(e)},n.handleRightClickOnFile=function(e,t,a){var r=a.getElementsByTagName("a")[0].href;"Preview"===t.action&&(console.log("Preview file: "),console.log(r),n.props.onOpenModalHandler(),n.setState({actionType:"Preview",openPreview:!0,fileToPreview:r})),"Remove"===t.action&&(console.log("Remove file: "),console.log(r),n.setState({actionType:"Remove"}))},n.handleFolderOpen=function(e){console.log("handleFolderOpen"),console.log(e)},n.handleFolderClose=function(e){console.log("handleFolderClose"),console.log(e)},n.startResizeRepo=function(){window.addEventListener("mousemove",n.Resize,!1),window.addEventListener("mouseup",n.stopResize,!1)},n.closeModalHandler=function(){n.props.onCloseModalHandler(),1==n.props.uploadFilesDone&&(n.props.onUploadFilesFinish(),n.refreshRepo(),n.setState({filesToUpload:[],refusedFiles:[]}))},n.Resize=function(e){var t=document.getElementById("RepoBar"),n=document.getElementById("ProjectPage"),a=document.getElementById("LeftSiteBar"),r=window.innerWidth-e.clientX,o=window.innerWidth-a.offsetWidth-r;t.style.width=r+"px",n.style.width=o+"px"},n.stopResize=function(e){window.removeEventListener("mousemove",n.Resize,!1),window.removeEventListener("mouseup",n.stopResize,!1)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.refreshRepo()}},{key:"refreshRepo",value:function(){var e=this.props.currentProjectID,t=this.props.currentProjectOwner;this.props.onGetProjectFilesForUser(t,e,this.props.token)}},{key:"render",value:function(){window.addEventListener("onresize",this.Resize,!1);var e=document.querySelectorAll("div.demo-mount-nested-editable"),t=null,n=null,a=null,r=null,i=!1;this.state.filesToUpload.length>0?(a=this.state.filesToUpload.map(function(e,t){return o.a.createElement(ht.a,{color:"success",className:"alercik",key:t+"_"+e.name},e.name)}),i=!0):i=!1,this.state.refusedFiles.length>0&&(r=this.state.refusedFiles.map(function(e,t){return o.a.createElement(ht.a,{color:"danger",className:"alercik",key:t+"_"+e.name},e.name)}));var s=null;return this.props.uploadFilesDone?s=o.a.createElement("div",null,o.a.createElement("button",{type:"button",className:"btn btn-success btn-block",onClick:this.closeModalHandler},"Sukces! Zamknij okno"),o.a.createElement(gt.a,{max:"100",color:"success",value:this.props.uploadPercent},Math.round(this.props.uploadPercent,2),"%")):i&&(s=o.a.createElement("div",null,o.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",disabled:this.props.uploadBtnDisabled,onClick:this.onStartUpload},"Upload"),o.a.createElement(gt.a,{max:"100",color:"primary",value:this.props.uploadPercent},Math.round(this.props.uploadPercent,2),"%"))),"Preview"===this.state.actionType?(t=o.a.createElement(mt,{fileToPreview:this.state.fileToPreview,onClose:this.closeModalHandler}),n="Podgl\u0105d pliku: "+Xe(this.state.fileToPreview)):"Upload"===this.state.actionType&&(t=o.a.createElement("div",null,o.a.createElement(Me,{whenDropped:this.handleDrop},o.a.createElement(Ve,{whenFilesChose:this.handleDrop,mainTitle:"Wgraj pliki z dysku",multipleFiles:!0,allowUploadLocalFiles:!0,desc:"Pliki zostan\u0105 zapisane do repozytorium: "+this.state.folderToUpload})),s,o.a.createElement("div",null,null!=a?o.a.createElement("div",null,o.a.createElement("p",null,"Poni\u017csze pliki zostan\u0105\xa0wgrane na serwer"),a):null,null!=r?o.a.createElement("div",null,o.a.createElement("p",null,"Poni\u017csze pliki nie mog\u0105 zosta\u0107 wgrane na serwer"),r):null)),n="Upload plik\xf3w do Repozytorium"),o.a.createElement(E,null,o.a.createElement(de,{show:this.props.modal,modalClosed:this.closeModalHandler,modalTitle:n},t),o.a.createElement("div",{className:"RepoBar",id:"RepoBar"},o.a.createElement("div",{className:"topPart"},o.a.createElement("div",{className:"repoTab"},o.a.createElement("div",{className:"scrollStrip",onMouseDown:this.startResizeRepo},o.a.createElement("i",{className:"fas fa-arrows-alt-h"})),"Repozytorium")),o.a.createElement("div",{className:"mainRepoContent"},e[0])))}}]),t}(r.Component),yt=(Object(y.b)(function(e){return{currentProjectID:e.projectR.currentProjectID,currentProjectName:e.projectR.currentProjectName,currentProjectOwner:e.projectR.currentProjectOwner,uploadPercent:e.repoR.uploadProgress,uploadBtnDisabled:e.repoR.uploadBtnDisabled,uploadFilesDone:e.repoR.uploadFilesDone,files:e.repoR.files,token:e.homeR.token,modal:e.projectR.modal,txtDisplayed:e.previewR.txtDisplayed,txtfileName:e.previewR.txtfileName,txtFileUrl:e.previewR.txtFileUrl,audiofileName:e.previewR.audiofileName,audioDisplayed:e.previewR.audioDisplayed,audioFileUrl:e.previewR.audioFileUrl,waveSurferInitialized:e.previewR.waveSurferInitialized,playing:e.previewR.playing}},function(e){return{onOpenModalHandler:function(){return e({type:"OPEN_MODAL_PROJECT"})},onCloseModalHandler:function(){return e({type:"CLOSE_MODAL_PROJECT"})},onUploadFilesFinish:function(){return e({type:"REPO_UPLOAD_FILES_FINISH"})},onUploadFilesModalOpen:function(){return e({type:"REPO_UPLOAD_FILES_MODAL_OPEN"})},onUploadFiles:function(t,n,a,r,o){return e(function(e,t,n,a,r){return function(o){for(var i=new FormData,s=0;s<e.length;s++)i.append("audioFiles",e[s]);i.append("folderKey",t),i.append("userId",n),i.append("projectId",a),o({type:"REPO_UPLOAD_FILES_INIT"}),w.a.post("/repoFiles/uploadFiles",i,{headers:{Authorization:"Bearer "+r,"content-type":"multipart/form-data"},onUploadProgress:function(e){var t=e.loaded/e.total*100;o(function(e){return{type:"REPO_UPLOAD_FILES_PROGRESS",percent:e}}(t)),100===t&&o({type:"REPO_UPLOAD_FILES_FINISH"})}}).then(function(e){console.log(e),o({type:"REPO_UPLOAD_FILES_SUCCESS",message:e.message})}).catch(function(e){console.log(e),o({type:"REPO_UPLOAD_FILES_FAILED",message:e.message})})}}(t,n,a,r,o))},onHandleCreateFolder:function(t,n,a,r){return e(function(e,t,n,a){return console.log("CREATE NEW FOLDER:"+e),function(r){w.a.post("/repoFiles/createFolder/",{key:e,projectId:t,userId:n},{headers:{Authorization:"Bearer "+a}}).then(function(e){var t,n;console.log(e),r((t=e.data.key,n=e.data.message,{type:"REPO_CREATE_FOLDER",key:t,message:n}))}).catch(function(e){r(function(e){return{type:"REPO_CREATE_FOLDER_FAILED",error:e.toString()}}(e))})}}(t,n,a,r))},onHandleCreateFiles:function(t,n){return e(function(e,t){return console.log("CREATE NEW FILES:"+e),function(n){n(function(e,t){return{type:"REPO_CREATE_FILES",files:e,prefix:t}}(e,t))}}(t,n))},onHandleRenameFolder:function(t,n,a,r,o){return e(function(e,t,n,a,r){return function(o){w.a.put("/repoFiles/renameFolder/",{oldKey:e,newKey:t,userId:a,projectId:n},{headers:{Authorization:"Bearer "+r}}).then(function(e){var t,n,a;console.log(e),o((t=e.data.oldKey,n=e.data.newKey,a=e.data.message,{type:"REPO_RENAME_FOLDER",oldKey:t,newKey:n,message:a}))}).catch(function(e){o(k(e))})}}(t,n,a,r,o))},onHandleRenameFile:function(t,n,a,r,o){return e(function(e,t,n,a,r){return function(o){w.a.put("/repoFiles/renameFile/",{oldKey:e,newKey:t,projectId:n,userId:a},{headers:{Authorization:"Bearer "+r}}).then(function(e){var t,n,a;console.log(e),o((t=e.data.oldKey,n=e.data.newKey,a=e.data.message,{type:"REPO_RENAME_FILE",oldKey:t,newKey:n,message:a}))}).catch(function(e){o(k(e))})}}(t,n,a,r,o))},onHandleDeleteFolder:function(t,n,a,r){return e(function(e,t,n,a){return console.log("DELETE FOLDER:"+e),function(r){w.a.delete("/repoFiles/deleteFolder/",{data:{folderKey:e,projectId:t,userId:n},headers:{Authorization:"Bearer "+a}}).then(function(e){r({type:"REPO_DELETE_FOLDER",folderKey:e.data.folderKey})}).catch(function(e){console.log(e),r(function(e){return{type:"REPO_DELETE_FOLDER_FAILED",error:e.toString()}}(e))})}}(t,n,a,r))},onHandleDeleteFile:function(t,n,a,r){return e(function(e,t,n,a){return console.log("DELETE FILE:"+e),function(r){w.a.delete("/repoFiles/deleteFile/",{data:{fileKey:e,projectId:t,userId:n},headers:{Authorization:"Bearer "+a}}).then(function(e){var t,n;r((t=e.data.fileKey,n=e.data.message,{type:"REPO_DELETE_FILE",fileKey:t,message:n}))}).catch(function(e){console.log(e),r(function(e){return{type:"REPO_DELETE_FILE_FAILED",error:e.toString()}}(e))})}}(t,n,a,r))},onGetProjectFilesForUser:function(t,n,a){return e(O(0,n,a))},onOpenTxtFileToPreview:function(t,n){return e(function(e){return function(t){fetch(e.url).then(function(n){n.text().then(function(n){t(function(e,t,n){return{type:"OPEN_TXT_FILE_PREVIEW",fileUrl:t,fileContent:n,fileKey:e}}(e.key,e.url,n))})}).catch(function(e){console.log(e)})}}(t))},onOpenAudioFileToPreview:function(t,n){return e(function(e,t){return function(n){n(function(e,t,n){return{type:"OPEN_AUDIO_FILE_PREVIEW",fileUrl:t,fileKey:e,waveSurferInitialized:n}}(e.key,e.url,t))}}(t,n))},onHandleDownloadFile:function(t,n,a,r){return e(function(e,t,n,a){return console.log(e),function(r){w.a.get("/repoFiles/downloadFile/",{headers:{Authorization:"Bearer "+a},params:{fileKey:e,projectId:t,userId:n}}).then(function(e){console.log(e);var t=e.data.pathToDownload,n=t.split("/");n=n[n.length-1],Object(S.saveAs)(t,n,{autoBom:!0})}).catch(function(e){console.log(e)})}}(t,n,a,r))}}})(Object(v.g)(vt)),n(278),n(279),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).selectContainer=function(){n.props.selectContainer(n.props.container._id)},n.handleClick=function(e,t){console.log(t.foo)},n.componentDidMount=function(){},n.runVAD=function(e){e.preventDefault(),n.props.history.push("/projects/"+n.props.container.project+"/vad/"),n.props.onAddContainerToVAD(n.props.container)},n.runDIA=function(e){e.preventDefault(),n.props.history.push("/projects/"+n.props.container.project+"/dia/"),n.props.onAddContainerToDIA(n.props.container)},n.runRECO=function(e){e.preventDefault(),n.props.history.push("/projects/"+n.props.container.project+"/recognition/"),n.props.onAddContainerToReco(n.props.container)},n.runALIGN=function(e){e.preventDefault(),n.props.history.push("/projects/"+n.props.container.project+"/segment/"),n.props.onAddContainerToAlign(n.props.container)},n.downloadElement=function(e){n.props.container.owner,n.props.container.project,n.props.container.session;var t="https://mowa.clarin-pl.eu:8433/api/repoFiles/download/"+n.props.container._id+"/"+e+"/?api_key="+n.props.token;window.open(t,"_self")},n.copyToClipboard=function(e){var t=e,n=document.createElement("textarea");n.value=t,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)},n.handleClick=function(e,t){var a=t.action;switch(a){case"copyId":var r=n.props.container._id;n.copyToClipboard(r);break;case"usun":n.props.onRemoveContainer(n.props.container);break;case"audio":case"oryginalAudio":case"VADctm":case"VADtextGrid":case"DIActm":case"DIAtextGrid":case"TXTTranscript":case"JSONTranscript":case"SEGctm":case"SEGtextGrid":case"EMUJSON":n.downloadElement(a);break;default:console.log("wrong action")}},n._handleFocus=function(e){},n._handleFocusOut=function(e){n.props.onChangeContainerName(n.props.container,e,n.props.token)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.container.containerName,t="error"==this.props.container.statusVAD?"error":"",n="error"==this.props.container.statusDIA?"error":"",a="error"==this.props.container.statusREC?"error":"",r="error"==this.props.container.statusSEG?"error":"";return o.a.createElement("div",null,o.a.createElement(ie.b,{id:"ToolItemREPOId"+this.props.container._id},o.a.createElement("div",{className:this.props.ifSelected?"ContainerFile selected":"ContainerFile",onClick:this.selectContainer},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement("div",{className:"containerName"},o.a.createElement(X.a,{text:e,labelClassName:"myLabelContainerClass",inputClassName:"myInputContainerClass",inputWidth:"160px",isEditing:!1,inputHeight:"25px",inputMaxLength:50,onFocus:this._handleFocus,onFocusOut:this._handleFocusOut}))),o.a.createElement("div",{className:"col"},o.a.createElement("div",{className:"repoManageIcons"},o.a.createElement(se.a,{title:"Detekcja mowy (VAD)"},o.a.createElement("a",{href:"#",role:"button",onClick:this.runVAD},o.a.createElement(K.a,{icon:Z.y,className:["repoIcon",t,this.props.container.ifVAD?"on":""].join(" ")}))),o.a.createElement(se.a,{title:"Diaryzacja (DIA)"},o.a.createElement("a",{href:"#",role:"button",onClick:this.runDIA},o.a.createElement(K.a,{icon:Z.f,className:["repoIcon",n,this.props.container.ifDIA?"on":""].join(" ")}))),o.a.createElement(se.a,{title:"Rozpoznawanie mowy (REC)"},o.a.createElement("a",{href:"#",role:"button",onClick:this.runRECO},o.a.createElement(K.a,{icon:Z.j,className:["repoIcon",a,this.props.container.ifREC?"on":""].join(" ")}))),o.a.createElement(se.a,{title:"Segmentacja (SEG)"},o.a.createElement("a",{href:"#",role:"button",onClick:this.runALIGN},o.a.createElement(K.a,{icon:Z.d,className:["repoIcon",r,this.props.container.ifSEG?"on":""].join(" ")})))))))),o.a.createElement(ie.a,{id:"ToolItemREPOId"+this.props.container._id},o.a.createElement(ie.c,{disabled:!1,data:{toolType:this.props.type,action:"copyId"},onClick:this.handleClick},"Kopiuj ID: ",this.props.container._id),o.a.createElement(ie.c,{divider:!0}),o.a.createElement(ie.c,{disabled:!1,data:{toolType:this.props.type,action:"usun"},onClick:this.handleClick},"Usu\u0144 z repozytorium"),o.a.createElement(ie.c,{divider:!0}),o.a.createElement(ie.c,{disabled:!1,data:{toolType:this.props.type,action:"audio"},onClick:this.handleClick},"Pobierz plik audio WAV 16000Hz, 16bit"),o.a.createElement(ie.c,{disabled:!1,data:{toolType:this.props.type,action:"oryginalAudio"},onClick:this.handleClick},"Pobierz oryginalny plik audio"),o.a.createElement(ie.c,{divider:!0}),o.a.createElement(ie.c,{disabled:!this.props.container.ifVAD,data:{toolType:this.props.type,action:"VADctm"},onClick:this.handleClick},"Pobierz plik detekcji mowy w formacie CTM"),o.a.createElement(ie.c,{disabled:!this.props.container.ifVAD,data:{toolType:this.props.type,action:"VADtextGrid"},onClick:this.handleClick},"Pobierz plik detekcji mowy w formacie TextGrid"),o.a.createElement(ie.c,{disabled:!this.props.container.ifDIA,data:{toolType:this.props.type,action:"DIActm"},onClick:this.handleClick},"Pobierz plik diaryzacji w formacie CTM"),o.a.createElement(ie.c,{disabled:!this.props.container.ifDIA,data:{toolType:this.props.type,action:"DIAtextGrid"},onClick:this.handleClick},"Pobierz plik diaryzacji mowy w formacie TextGrid"),o.a.createElement(ie.c,{disabled:!this.props.container.ifREC,data:{toolType:this.props.type,action:"TXTTranscript"},onClick:this.handleClick},"Pobierz transkrypcje w formacie txt"),o.a.createElement(ie.c,{disabled:!this.props.container.ifREC,data:{toolType:this.props.type,action:"JSONTranscript"},onClick:this.handleClick},"Pobierz transkrypcje w formacie json"),o.a.createElement(ie.c,{disabled:!this.props.container.ifSEG,data:{toolType:this.props.type,action:"SEGctm"},onClick:this.handleClick},"Pobierz segmentacje w formacie ctm"),o.a.createElement(ie.c,{disabled:!this.props.container.ifSEG,data:{toolType:this.props.type,action:"SEGtextGrid"},onClick:this.handleClick},"Pobierz segmentacje w formacie TextGrid"),o.a.createElement(ie.c,{disabled:!this.props.container.ifSEG,data:{toolType:this.props.type,action:"EMUJSON"},onClick:this.handleClick},"Pobierz segmentacje w formacie json")))}}]),t}(r.Component)),bt=Object(v.g)(yt),It=(n(280),n(75)),wt=n.n(It),St=n(131),jt=n(26),Ct=(n(282),n(283),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={hightlight:!1},n.fileInputRef=o.a.createRef(),n.openFileDialog=n.openFileDialog.bind(Object(jt.a)(n)),n.onFilesAdded=n.onFilesAdded.bind(Object(jt.a)(n)),n.onDragOver=n.onDragOver.bind(Object(jt.a)(n)),n.onDragLeave=n.onDragLeave.bind(Object(jt.a)(n)),n.onDrop=n.onDrop.bind(Object(jt.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"openFileDialog",value:function(){this.props.disabled||this.fileInputRef.current.click()}},{key:"onFilesAdded",value:function(e){if(!this.props.disabled){var t=e.target.files;if(this.props.onFilesAdded){var n=this.fileListToArray(t);this.props.onFilesAdded(n)}}}},{key:"fileListToArray",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e.item(n));return t}},{key:"onDrop",value:function(e){if(e.preventDefault(),!this.props.disabled){var t=e.dataTransfer.files;if(this.props.onFilesAdded){var n=this.fileListToArray(t);this.props.onFilesAdded(n)}this.setState({hightlight:!1})}}},{key:"onDragOver",value:function(e){e.preventDefault(),this.props.disabled||this.setState({hightlight:!0})}},{key:"onDragLeave",value:function(){this.setState({hightlight:!1})}},{key:"render",value:function(){return o.a.createElement("div",{className:this.state.hightlight?"Dropzone Highlight":"Dropzone",onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onClick:this.openFileDialog,style:{cursor:this.props.disabled?"default":"pointer"}},o.a.createElement("div",null,o.a.createElement(K.a,{icon:Z.B,className:"icon"})," ",o.a.createElement("span",{className:"iconText"},"Wgraj pliki")),o.a.createElement("input",{ref:this.fileInputRef,className:"FileInput",type:"file",multiple:!0,onChange:this.onFilesAdded}))}}]),t}(r.Component)),Tt=(n(284),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e="Progress";return e=100===this.props.progress?"Progress success":"Progress",o.a.createElement("div",{className:"ProgressProgressBar"},o.a.createElement("div",{className:e,style:{width:this.props.progress+"%"}}))}}]),t}(r.Component)),Ot=n(132),kt=n.n(Ot),At=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={files:[],uploading:!1,uploadProgress:{},successfullUploaded:!1,uploadValid:{}},n.uploadFinishAndUpdateRepo=function(){n.props.onGetProjectFilesForUser(n.props.currentProjectOwner,n.props.currentProjectID,n.props.token),n.setState({files:[],successfullUploaded:!1})},n.removeToUpload=function(e,t,a){var r=n.state.files[e],o=n.state.files.filter(function(e){return e!=r});n.setState(function(e){return{files:o}})},n.onFilesAdded=n.onFilesAdded.bind(Object(jt.a)(n)),n.uploadFiles=n.uploadFiles.bind(Object(jt.a)(n)),n.sendRequest=n.sendRequest.bind(Object(jt.a)(n)),n.renderActions=n.renderActions.bind(Object(jt.a)(n)),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"onFilesAdded",value:function(e){for(var t=this.state.uploadValid,n=0;n<e.length;n++){var a=e[n],r=qe(a.name);r=r[0],$e.hasOwnProperty(r)?t[a.name]=!0:t[a.name]=!1}this.setState(function(n){return{files:n.files.concat(e),uploadValid:t}})}},{key:"sendRequest",value:function(e){var t=this,n=this.props.currentProjectID,a=this.props.currentProjectOwner,r=this.props.forSession,o=kt()("");return new Promise(function(i,s){var c=new FormData;c.append("userId",a),c.append("projectId",n),c.append("sessionId",r),c.append("uniqueHash",o),c.append("myFile",e),w.a.post("/repoFiles/uploadFile",c,{headers:{Authorization:"Bearer "+t.props.token,"Content-Type":"multipart/form-data; boundary=".concat(c._boundary)},onUploadProgress:function(n){var a=Object(h.a)({},t.state.uploadProgress);a[e.name]={state:"pending",percentage:n.loaded/n.total*100},t.setState({uploadProgress:a})}}).then(function(e){var n=e.data.oryginalName,a=(e.data.sessionId,e.data.containerId,e.data.message,Object(h.a)({},t.state.uploadProgress));a[n]={state:"done",percentage:100},t.setState({uploadProgress:a}),i(e)}).catch(function(e){s(e)})})}},{key:"uploadFiles",value:function(){var e=Object(St.a)(wt.a.mark(function e(t){var n,a=this;return wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({uploadProgress:{},uploading:!0}),n=[],this.state.files.forEach(function(e){n.push(a.sendRequest(e))}),e.prev=3,e.next=6,Promise.all(n);case 6:this.setState({successfullUploaded:!0,uploading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({successfullUploaded:!1,uploading:!1});case 12:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"renderActions",value:function(){var e=this;if(this.state.files.length>0)return this.state.successfullUploaded?o.a.createElement("button",{onClick:this.uploadFinishAndUpdateRepo},"Zaktualizuj repozytorium"):o.a.createElement("button",{disabled:this.state.files.length<0||this.state.uploading,onClick:function(t){return e.uploadFiles(t)}},"Wgraj pliki")}},{key:"renderProgress",value:function(e){var t=this.state.uploadProgress[e.name];if(this.state.uploading||this.state.successfullUploaded)return o.a.createElement("div",{className:"ProgressWrapper"},o.a.createElement(Tt,{progress:t?t.percentage:0}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"UploadAudio"},o.a.createElement("div",{className:"ContentUploadAudio"},o.a.createElement("div",null,o.a.createElement(Ct,{onFilesAdded:this.onFilesAdded,disabled:this.state.uploading})),o.a.createElement("div",{className:"Files"},this.state.files.map(function(t,n){var a=e.state.uploadProgress[t.name],r=null,i=null;return i=e.state.uploadValid[t.name]?"valid":"invalid",a&&"done"===a.state||(r=o.a.createElement(K.a,{icon:Z.r,className:"removeFile",onClick:function(a){return e.removeToUpload(n,t.name+n,a)}})),o.a.createElement("div",{key:t.name+n,className:"FileToUpload"},r,o.a.createElement("span",{className:["Filename",i].join(" ")},t.name),e.renderProgress(t))}))),o.a.createElement("div",{className:"Actions"},this.renderActions()))}}]),t}(r.Component),Pt=Object(y.b)(function(e){return{currentProjectID:e.projectR.currentProjectID,currentProjectName:e.projectR.currentProjectName,currentProjectOwner:e.projectR.currentProjectOwner,currentlySelestSessions:e.repoR.currentlySelestSessions,token:e.homeR.token}},function(e){return{onGetProjectFilesForUser:function(t,n,a){return e(O(0,n,a))}}})(At),Dt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={ifOpened:!1},n.clickFolderHandler=function(){n.setState({ifOpened:!n.state.ifOpened})},n.selectTheSession=function(){n.props.selectTheSession(n.props.sessionId)},n.selectTheContainer=function(e){n.props.selectTheContainer(e)},n.copyToClipboard=function(e){var t=e,n=document.createElement("textarea");n.value=t,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)},n.handleClick=function(e,t){switch(t.action){case"usun":n.props.onRemoveSession(n.props.sessionId,n.props.sessionName);break;case"kopiujID":var a=n.props.sessionId;n.copyToClipboard(a);break;default:console.log("wrong action")}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"render",value:function(){var e,t=this,n=o.a.createElement("div",{className:"uploadCard"},o.a.createElement(Pt,{forSession:this.props.sessionId}));return e=this.props.containers.map(function(e){return o.a.createElement(bt,{container:e,onAddContainerToReco:t.props.onAddContainerToReco,onAddContainerToAlign:t.props.onAddContainerToAlign,onAddContainerToVAD:t.props.onAddContainerToVAD,onAddContainerToDIA:t.props.onAddContainerToDIA,onChangeContainerName:t.props.onChangeContainerName,key:e._id,onRemoveContainer:t.props.onRemoveContainer,token:t.props.token,ifSelected:e.ifSelected,selectContainer:t.selectTheContainer})}),o.a.createElement("div",{className:"RepoSession"},o.a.createElement(ie.b,{id:"ToolItemSESSIONId"+this.props.sessionId},o.a.createElement("div",{className:this.props.ifSelected?"sessionFolder selected":"sessionFolder",onClick:this.selectTheSession},o.a.createElement(K.a,{icon:this.state.ifOpened?Z.b:Z.c,className:"repoIcon",style:{fontSize:"0.7em"},onClick:this.clickFolderHandler}),o.a.createElement(K.a,{icon:this.state.ifOpened?Z.l:Z.k,className:"repoIcon",onClick:this.clickFolderHandler}),o.a.createElement("span",{className:"sessionName"},this.props.sessionName),this.props.ifSelected?o.a.createElement(K.a,{icon:Z.b,className:"repoIcon",style:{fontSize:"0.7em",float:"right",margin:"6px"},onClick:this.clickFolderHandler}):null)),o.a.createElement(ie.a,{id:"ToolItemSESSIONId"+this.props.sessionId},o.a.createElement(ie.c,{disabled:!1,data:{action:"kopiujID"},onClick:this.handleClick},"Kopiuj ID sesji: ",this.props.sessionId),o.a.createElement(ie.c,{disabled:!1,data:{action:"usun"},onClick:this.handleClick},"Usu\u0144 sesje wraz z zawarto\u015bci\u0105")),o.a.createElement("div",{className:"containerList"},this.state.ifOpened?n:null,this.state.ifOpened?e:null))}}]),t}(r.Component),Rt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={value:"",isValid:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.errorMessage||!1;return o.a.createElement("form",{onSubmit:this.props.onSubmitHandler},o.a.createElement("h5",{style:{textAlign:"left"}},this.props.title),o.a.createElement("hr",null),!1!==e?o.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.props.errorMessage):null,o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("input",{type:"text",className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChangeHandler,value:this.props.value}),o.a.createElement("div",{className:"input-group-append"},o.a.createElement("button",{className:"btn btn-primary",type:"submit"},this.props.buttonLabel))))}}]),t}(r.Component);function Nt(){var e=Object(a.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return Nt=function(){return e},e}var _t=Object(le.css)(Nt()),Ft=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={clickCreateSession:!1,clickExportToMenu:!1,clickRemoveItem:!1,newSessionName:"",modal:!1,whatClicked:"",waitingForCorpus:!1,whichContainerToRemove:null,whichSessionIdToRemove:null},n.removeObjectFromRepo=function(){var e=n.props.currentlySelectedSessions,t=n.props.currentlySelectedContainers;if(null!==e[0]&&e.length>0)alert("Czy chcesz usun\u0105\u0107 sesj\u0119 wraz ze wszystkimi plikami w tej sesji?");else for(var a=0;a<t.length;a++){var r=t[a];n.props.removeContainerFromRepo(n.props.currentProjectOwner,n.props.currentProjectID,n.props.repoData.containers.byId[r].session,r,n.props.token)}},n.selectSessionHandler=function(e){n.props.onSelectSession(e)},n.selectContainerHandler=function(e){n.props.onSelectContainer(e)},n.componentDidUpdate=function(e){e.exportToEmuReady!==n.props.exportToEmuReady&&n.setState({waitingForCorpus:!1})},n.addSession=function(){n.setState({modal:!0,whatClicked:"addSession"})},n.closeModalHandler=function(){n.setState({modal:!1,whatClicked:"",whichContainerToRemove:null,whichSessionIdToRemove:null,whichSessionNameToRemove:""})},n.newSessionChangeHandler=function(e){e.preventDefault(),n.setState({newSessionName:e.target.value})},n.onSubmitNewSessionHandler=function(e){e.preventDefault(),n.props.createNewSession(n.state.newSessionName,n.props.currentProjectID,n.props.currentProjectOwner,n.props.token),n.setState({modal:!1})},n.addContainerToRecoList=function(e){n.props.addContainerToReco(e)},n.addContainerToAlignList=function(e){n.props.addContainerToAlign(e)},n.addContainerToDIAList=function(e){n.props.addContainerToDIA(e)},n.addContainerToVADList=function(e){n.props.addContainerToVAD(e)},n.removeContainer=function(e){n.setState({modal:!0,whatClicked:"removeContainer",whichContainerToRemove:e})},n.finallyRemoveContainer=function(){n.props.removeContainerFromRepo(n.props.currentProjectOwner,n.props.currentProjectID,n.state.whichContainerToRemove.session,n.state.whichContainerToRemove._id,n.props.token),n.closeModalHandler()},n.removeSession=function(e,t){n.setState({modal:!0,whatClicked:"removeSession",whichSessionIdToRemove:e,whichSessionNameToRemove:t})},n.finallyRemoveSession=function(){n.props.removeSessionFromRepo(n.props.currentProjectOwner,n.props.currentProjectID,n.state.whichSessionIdToRemove,n.props.token),n.closeModalHandler()},n.openConfirmExportToEmu=function(){n.setState({modal:!0,whatClicked:"EMUexport"})},n.runEMUExport=function(){n.setState({waitingForCorpus:!0}),n.props.onExportToEMU(n.props.currentProjectID,n.props.currentProjectOwner,n.props.token)},n.downloadCorpus=function(){var e=n.props.currentProjectID,t="https://mowa.clarin-pl.eu:8433/api/repoFiles/downloadKorpus/"+n.props.currentProjectOwner+"/"+e+"/?api_key="+n.props.token;window.open(t),n.props.onKorpusDownloaded()},n.modalContentEMUExport=function(){var e=o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:n.runEMUExport},"Ok");return n.props.exportToEmuReady?e=o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:n.downloadCorpus},"Pobierz korpus"):n.state.waitingForCorpus&&(e=o.a.createElement(ce.RingLoader,{css:_t,size:"40px",color:"rgb(52, 152, 219)",loading:!0})),o.a.createElement("div",null,o.a.createElement("p",null,"Zostan\u0105 wyeksportowane tylko te pliki dla kt\xf3rych zosta\u0142y wykonane wszystkie poziomy annotacji."),o.a.createElement("p",null,"Podcas tego procesu nie wykonuj \u017cadnych czynno\u015bci"),e)},n.modalContentRemoveContainer=function(){var e=n.state.whichContainerToRemove.containerName;return o.a.createElement("div",null,o.a.createElement("p",null,e),o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:n.finallyRemoveContainer},"TAK"),o.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:n.closeModalHandler},"NIE"))},n.modalContentRemoveSession=function(){var e=n.state.whichSessionNameToRemove;return o.a.createElement("div",null,o.a.createElement("p",null,e),o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:n.finallyRemoveSession},"TAK"),o.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:n.closeModalHandler},"NIE"))},n.modalContentAddSession=function(){return o.a.createElement(Rt,{placeholder:"Podaj nazwe sesji",onChangeHandler:n.newSessionChangeHandler,value:n.state.newSessionName,buttonLabel:"Stw\xf3rz sesje",onSubmitHandler:n.onSubmitNewSessionHandler})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.refreshRepo()}},{key:"refreshRepo",value:function(){var e=this.props.currentProjectID,t=this.props.currentProjectOwner;this.props.onGetProjectFilesForUser(t,e,this.props.token)}},{key:"render",value:function(){var e=this,t="",n=null;switch(this.state.whatClicked){case"EMUexport":t="Czy jeste\u015b pewien \u017ce chcesz eksportowa\u0107 korpus do EMU?",n=this.modalContentEMUExport();break;case"removeContainer":t="Czy jeste\u015b pewien \u017ce chcesz usun\u0105\u0107 ?",n=this.modalContentRemoveContainer();break;case"removeSession":t="Czy jeste\u015b pewien \u017ce chcesz usun\u0105\u0107 ca\u0142\u0105 sesj\u0119 wraz z zawarto\u015bci\u0105?",n=this.modalContentRemoveSession();break;case"addSession":t="Tworzenie nowej sesji",n=this.modalContentAddSession()}var a;return a=Object.keys(this.props.repoData.sessions.byId).map(function(t){var n=e.props.repoData.sessions.byId[t].id,a=e.props.repoData.sessions.byId[t].sessionName,r=e.props.repoData.sessions.byId[t].ifSelected,i=e.props.repoData.sessions.byId[t].containers.map(function(t){return e.props.repoData.containers.byId[t]});return o.a.createElement(Dt,{containers:i,sessionName:a,sessionId:n,projectId:e.props.currentProjectID,key:n,token:e.props.token,ifSelected:r,selectTheSession:e.selectSessionHandler,selectTheContainer:e.selectContainerHandler,onRemoveContainer:function(t){return e.removeContainer(t)},onRemoveSession:function(t,n){return e.removeSession(t,n)},onChangeContainerName:function(t,n,a){return e.props.changeContainerName(t,n,a)},onAddContainerToDIA:function(t){return e.addContainerToDIAList(t)},onAddContainerToVAD:function(t){return e.addContainerToVADList(t)},onAddContainerToReco:function(t){return e.addContainerToRecoList(t)},onAddContainerToAlign:function(t){return e.addContainerToAlignList(t)}})}),o.a.createElement(E,null,o.a.createElement(de,{show:this.state.modal,modalClosed:this.closeModalHandler,modalTitle:t},n),o.a.createElement("div",{className:"RepoPanel",id:"RepoPanel"},o.a.createElement("div",{className:"topPart"},o.a.createElement("div",{className:"repoTab"},"Repozytorium")),o.a.createElement("div",{className:"SettingBarRepo"}),o.a.createElement("div",{className:"mainRepoContent"},o.a.createElement("div",{className:"operatingIcons"},o.a.createElement(se.a,{title:"Dodaj sesj\u0119"},o.a.createElement("a",{href:"#",role:"button"},o.a.createElement(K.a,{icon:Z.m,onClick:this.addSession})))),o.a.createElement("div",{className:"fileList"},a),o.a.createElement("div",{className:"exportToEmu"},o.a.createElement(oe,{napis:"Eksportuj korpus do EMU-SDMS",icon:null,customeStyle:{height:"50px"},disabled:!1,whenClicked:this.openConfirmExportToEmu})))))}}]),t}(r.Component),zt=Object(y.b)(function(e){return{repoData:e.repoR,currentlySelectedSessions:e.repoR.currentlySelectedSessions,currentlySelectedContainers:e.repoR.currentlySelectedContainers,currentProjectID:e.projectR.currentProjectID,currentProjectName:e.projectR.currentProjectName,currentProjectOwner:e.projectR.currentProjectOwner,token:e.homeR.token,modal:e.projectR.modal,exportToEmuReady:e.repoR.exportToEmuReady}},function(e){return{onExportToEMU:function(t,n,a){return e(function(e,t,n){return console.log("Export to emu"),function(a){w.a.get("/repoFiles/exportToEmu/"+t+"/"+e,{headers:{Authorization:"Bearer "+n}}).then(function(e){console.log(e),a({type:"EXPORT_TO_EMU_DONE_SUCCESS",message:e.data.message})}).catch(function(e){console.log(e),a({type:"EXPORT_TO_EMU_DONE_FAILED",message:e.message})})}}(t,n,a))},onSelectSession:function(t){return e(function(e){return{type:"REPO_SELECT_SESSION",sessionId:e}}(t))},onSelectContainer:function(t){return e(function(e){return{type:"REPO_SELECT_CONTAINER",containerId:e}}(t))},onGetProjectFilesForUser:function(t,n,a){return e(O(0,n,a))},removeContainerFromRepo:function(t,n,a,r,o){return e(function(e,t,n,a,r){return function(e){w.a.delete("/repoFiles/delete/"+a,{headers:{Authorization:"Bearer "+r}}).then(function(t){var n,a,r;e((n=t.data.message,a=t.data.sessionId,r=t.data.containerId,{type:"REPO_DELETE_CONTAINER_SUCCESS",message:n,sessionId:a,containerId:r}))}).catch(function(t){e(function(e){return{type:"REPO_DELETE_CONTAINER_FAILED",error:e}}(t))})}}(0,0,0,r,o))},onOpenModalHandler:function(){return e({type:"OPEN_MODAL_PROJECT"})},onCloseModalHandler:function(){return e({type:"CLOSE_MODAL_PROJECT"})},addContainerToDIA:function(t){return e(function(e){return{type:"ADD_CONTAINER_TO_DIA",container:e}}(t))},addContainerToVAD:function(t){return e(function(e){return{type:"ADD_CONTAINER_TO_VAD",container:e}}(t))},addContainerToReco:function(t){return e(function(e){return{type:"ADD_CONTAINER_TO_RECO",container:e}}(t))},addContainerToAlign:function(t){return e(function(e){return{type:"ADD_CONTAINER_TO_ALIGN",container:e}}(t))},onKorpusDownloaded:function(){return e({type:"KORPUS_DOWNLOADED"})},createNewSession:function(t,n,a,r){return e(function(e,t,n,a){return function(r){w.a.post("/repoFiles/createNewSession",{sessionName:e,projectId:t,userId:n},{headers:{Authorization:"Bearer "+a}}).then(function(e){var t=e.data.sessionName,n=e.data.id;r(C(t,n))}).catch(function(e){r(T(e))})}}(t,n,a,r))},removeSessionFromRepo:function(t,n,a,r){return e(function(e,t,n,a){return function(e){w.a.delete("/repoFiles/deleteSession/"+n,{headers:{Authorization:"Bearer "+a}}).then(function(t){var n,a;e((n=t.data.message,a=t.data.sessionId,{type:"REPO_DELETE_SESSION_SUCCESS",message:n,sessionId:a}))}).catch(function(t){e(function(e){return{type:"REPO_DELETE_SESSION_FAILED",error:e}}(t))})}}(0,0,a,r))},changeContainerName:function(t,n,a){return e(function(e,t,n){return function(a){var r=e._id;w.a.put("/repoFiles/changeContainerName/"+r,{newName:t},{headers:{Authorization:"Bearer "+n}}).then(function(e){a({type:"REPO_CHANGE_CONTAINER_NAME_SUCCESS",containerId:e.data.containerId})}).catch(function(e){a(function(e){return{type:"REPO_CHANGE_CONTAINER_NAME_FAILED",error:e}}(e))})}}(t,n,a))}}})(Object(v.g)(Ft)),Lt=function(e){return o.a.createElement(E,null,o.a.createElement("p",null,"Ups.... co\u015b posz\u0142o nie tak"))},xt=(n(287),Object(v.g)(function(e){var t=null;switch(e.iconType){case"DASH":t=Z.e;break;case"VAD":t=Z.y;break;case"DIA":t=Z.f;break;case"REC":t=Z.j;break;case"SEG":t=Z.d;break;default:t=Z.e}return o.a.createElement(E,null,o.a.createElement("li",{className:"nav-item Tab"},o.a.createElement(g.c,{className:["nav-link","clarinNavLink"].join(" "),to:{pathname:e.match.url+""+e.whereToLink,search:"",activeClassName:"active"}},o.a.createElement(K.a,{icon:t,className:"tabIcon"}),"  ",e.title)))})),Ut=n(348),Mt=n(141),Vt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).componentWillUnmount=function(){localStorage.removeItem("projectId"),localStorage.removeItem("projectTitle"),localStorage.removeItem("projectOwnerId")},n.componentWillMount=function(){var e=localStorage.getItem("token"),t=localStorage.getItem("expiryDate");if(e&&t)if(new Date(t)<=new Date)n.props.onLogOut();else{var a=localStorage.getItem("userId"),r=localStorage.getItem("userName");new Date(t).getTime(),(new Date).getTime();console.log(a),console.log(r),console.log(e),n.props.onSetLoggedIn(a,r,e);var o=n.props.currentProjectID,i=n.props.currentProjectName,s=n.props.currentProjectOwner;localStorage.projectId?(o=localStorage.getItem("projectId"),i=localStorage.getItem("projectTitle"),s=localStorage.getItem("projectOwnerId")):(localStorage.setItem("projectId",o),localStorage.setItem("projectTitle",i),localStorage.setItem("projectOwnerId",s)),console.log(o),console.log(i),console.log(s),n.props.onInitProjectHandler(o,i,s),n.props.onClearRecoStore(),n.props.onClearSegmentStore(),n.props.onClearPreviewStore()}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(Ut.a,{backend:Mt.a},o.a.createElement(E,null,o.a.createElement($,{version:"longinit",wide:"yes",language:"pl",projectTitle:""+this.props.currentProjectName,changeLn:this.props.changeLn,currLn:this.props.currLn}),o.a.createElement("div",{className:"ProjectPage",id:"ProjectPage"},o.a.createElement("ul",{className:["nav nav-tabs","darkbg"].join(" ")},o.a.createElement(xt,{title:"Dashboard",iconType:"DASH",whereToLink:"/dashboard"}),o.a.createElement(xt,{title:"Detekcja mowy",iconType:"VAD",whereToLink:"/vad"}),o.a.createElement(xt,{title:"Diaryzacja",iconType:"DIA",whereToLink:"/dia"}),o.a.createElement(xt,{title:"Transkrypcje",iconType:"REC",whereToLink:"/recognition"}),o.a.createElement(xt,{title:"Segmentacja",iconType:"SEG",whereToLink:"/segment"})),o.a.createElement(v.d,null,o.a.createElement(v.b,{path:this.props.match.url+"/recognition",component:De}),o.a.createElement(v.b,{path:this.props.match.url+"/segment",component:Ne}),o.a.createElement(v.b,{path:this.props.match.url+"/vad",component:Fe}),o.a.createElement(v.b,{path:this.props.match.url+"/dia",component:Le}),o.a.createElement(v.b,{path:this.props.match.url+"/dashboard",render:function(e){return o.a.createElement(re,null)}}),o.a.createElement(v.a,{from:this.props.match.url+"/",to:this.props.match.url+"/dashboard"}),o.a.createElement(v.b,{component:Lt}))),o.a.createElement(zt,null)))}}]),t}(r.Component),Gt=Object(y.b)(function(e){return{currentProjectID:e.prolistR.chosenProjectID,currentProjectName:e.projectR.currentProjectName,currentProjectOwner:e.prolistR.chosenProjectOwner}},function(e){return{onInitProjectHandler:function(t,n,a){return e(P(t,n,a))},onSetLoggedIn:function(t,n,a){return e(F(t,n,a))},onLogOut:function(){return e(_())},onClearRecoStore:function(){return e({type:"CLEAR_RECO_STORE"})},onClearSegmentStore:function(){return e({type:"CLEAR_SEGMENT_STORE"})},onClearPreviewStore:function(){return e({type:"CLEAR_PREVIEW_STORE"})}}})(Vt),Ht=(n(288),function(e){return o.a.createElement(E,null,o.a.createElement("tr",{className:"ProjectListItem"},o.a.createElement("td",{className:"projectTitle"},o.a.createElement("a",{onClick:e.wyborprojektu},e.title)),o.a.createElement("td",null,e.projektID),o.a.createElement("td",null,e.modified),o.a.createElement("td",null,o.a.createElement(K.a,{icon:Z.A,className:"ProjectIcon removeProject",onClick:e.deleteProject}))))}),Bt=(n(289),function(e){e.ifLoading;var t=o.a.createElement("tr",{className:"thead-dark"},o.a.createElement("td",{className:"title"},"Tytu\u0142"),o.a.createElement("td",null," Identyfikator"),o.a.createElement("td",null,"Data utworzenia"),o.a.createElement("td",null,"Akcje"));return o.a.createElement(E,null,o.a.createElement("div",{className:"ProjectList"},e.siteBar,o.a.createElement("table",{className:"table"},o.a.createElement("tbody",null,t,e.children))))}),Wt=(n(290),function(e){return o.a.createElement("div",{className:"Spinner"},o.a.createElement("div",{className:"lds-facebook"},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null)))}),Jt=function(e){return o.a.createElement(E,null,o.a.createElement("div",{className:"alert alert-warning",role:"alert"},o.a.createElement("p",{style:{textAlign:"center"}},e.messageQuestion),o.a.createElement("p",{style:{textAlign:"center",fontWeight:"bold"}},e.projectName)),o.a.createElement("button",{className:"btn btn-outline-secondary",onClick:e.onCancel},"Cancel"),o.a.createElement("button",{className:"btn btn-primary",onClick:e.onOk},"OK"))},Kt="CREATE_NEW_PROJECT",Zt="EDIT_NAME_PROJECT",qt="DELETE_PROJECT",Xt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={modalDisplay:!1,newProjectName:"",modalTitle:"",currentValue:""},n.componentDidMount=function(){var e=localStorage.getItem("token"),t=localStorage.getItem("expiryDate");if(e&&t)if(new Date(t)<=new Date)n.props.onLogOut();else{var a=localStorage.getItem("userId"),r=localStorage.getItem("userName");new Date(t).getTime(),(new Date).getTime();n.props.onSetLoggedIn(a,r,e),n.props.onGetProjectsList(a,e)}},n.duplicateProjectHandler=function(e){alert("duplicate")},n.editNameProjectHandler=function(e){alert("edit")},n.shareProjectHandler=function(e){alert("share")},n.removeProjectHandler=function(e){alert("remove")},n.checkValidity=function(e){var t=!0;return t=""!==e.trim()&&t},n.addNewProjectHandler=function(e){e.preventDefault(),n.checkValidity(n.state.newProjectName)?n.props.onNewProject(n.state.newProjectName,n.props.userId,n.props.token):console.log("FORM IS INVALID!")},n.newProjectNameChangeHandler=function(e){console.log("newProjectNameChangeHandler"),e.preventDefault(),n.setState({newProjectName:e.target.value})},n.editProjectNameSubmitHandler=function(e){e.preventDefault(),n.props.onNameEdit(n.props.projectId,n.state.newProjectName,n.props.userId,n.props.token)},n.onNewProjectDone=function(){n.closeModalHandler()},n.openModalHandler=function(e,t,a){n.setState({newProjectName:a}),n.props.onOpenModalHandler(e,t,a)},n.closeModalHandler=function(){n.props.onCloseModalHandler()},n.removeProjectHandler=function(e){n.props.onDelete(e,n.props.userId,n.props.token)},n.wyborProjektuOK=function(e,t,a){n.props.onProjectChoice(e,t,a),n.props.onInitProjectHandler(e,t,a),n.props.history.push("/projects/"+e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=o.a.createElement(E,null,o.a.createElement(Rt,{onSubmitHandler:this.addNewProjectHandler,onChangeHandler:this.newProjectNameChangeHandler,title:"Stworz nowy projekt",placeholder:"Podaj nazwe projektu",buttonLabel:"Dodaj projekt",value:this.state.newProjectName,errorMessage:this.props.errorMessage})),n=o.a.createElement(E,null,o.a.createElement(Rt,{onSubmitHandler:this.editProjectNameSubmitHandler,onChangeHandler:this.newProjectNameChangeHandler,title:"Edytuj nazwe projektu",placeholder:"Zmie nazwe projektu",buttonLabel:"Zmien",value:this.state.newProjectName,errorMessage:this.props.errorMessage})),a=o.a.createElement(E,null,o.a.createElement(Jt,{messageQuestion:"Czy na pewno chcesz usunac poni\u017cszy projekt? Wraz z nim zostan\u0105 usuni\u0119te wszystkie pliki audio oraz transkrypcje!",onCancel:this.closeModalHandler,onOk:function(){return e.props.onDelete(e.props.projectId,e.props.userId,e.props.token)},projectName:this.props.projectName})),r=null;switch(this.props.localAction){case Kt:r=t;break;case Zt:r=n;break;case qt:r=a;break;default:r=o.a.createElement("p",null,"Bledny typ akcji lokalnej")}var i=o.a.createElement(ne,{czyTopPart:!1,desc:"W tym miejscu mo\u017cna tworzy\u0107 w\u0142asne korpusy kt\xf3re stanowi\u0105 przestrze\u0144 robocz\u0105 dla wgranych plik\xf3w. UWAGA! w przypadku usuni\u0119cia korpusu, zostan\u0105 r\xf3wnie\u017c usuni\u0119te wszystkie wgrane do niego pliki!"},o.a.createElement(oe,{customeStyle:{height:"50px"},napis:"Dodaj korpus",iconType:"fa-plus",whenClicked:function(t){return e.openModalHandler(Kt,"","")}})),s=null,c=null;return this.props.ifError?s=o.a.createElement("p",{className:"error"},"Error with connecting to server"):this.props.ifProjectsLoading?s=o.a.createElement(Wt,null):(c=this.props.projectList.map(function(t,n){return o.a.createElement(Ht,{key:t._id,projektID:t._id,title:t.name,owner:t.owner,modified:t.projectCreated,deleteProject:function(n,a,r){return e.openModalHandler(qt,t._id,t.name)},wyborprojektu:function(n,a,r){return e.wyborProjektuOK(t._id,t.name,t.owner)},editName:function(n,a,r){return e.openModalHandler(Zt,t._id,t.name)}})}),s=o.a.createElement(Bt,{siteBar:i},c)),o.a.createElement(E,null,o.a.createElement(v.b,{path:"/project/",render:function(e){return o.a.createElement(Gt,e)}}),o.a.createElement(de,{show:this.props.modalDisplay,modalClosed:this.closeModalHandler},r),o.a.createElement($,{version:"init",wide:"yes",language:"pl",projectTitle:"",changeLn:this.props.changeLn,currLn:this.props.currLn}),i,s)}}]),t}(r.Component),Yt=Object(y.b)(function(e){return{userId:e.homeR.userId,userName:e.homeR.userName,token:e.homeR.token,localAction:e.prolistR.localAction,modalDisplay:e.prolistR.modalDisplay,newProjectCreated:e.prolistR.loaded,projectList:e.prolistR.projects,ifError:e.prolistR.error,errorMessage:e.prolistR.errorMessage,ifProjectsLoading:e.prolistR.projectsLoading,projectId:e.prolistR.projectId,projectName:e.prolistR.projectName}},function(e){return{onInitProjectHandler:function(t,n,a){return e(P(t,n,a))},onOpenModalHandler:function(t,n,a){return e(function(e,t,n){return{type:"OPEN_MODAL",localActionType:e,projectId:t,projectName:n}}(t,n,a))},onCloseModalHandler:function(){return e({type:"CLOSE_MODAL"})},onNewProjectDone:function(){return e({type:"ADD_PROJECT_DONE"})},onNewProject:function(t,n,a){return e(function(e,t,n){return function(a){a({type:"ADD_PROJECT_INIT"}),w.a.post("/projectsList/addProject",{projectName:e},{headers:{Authorization:"Bearer "+n}}).then(function(r){a(function(e,t,n,a,r){return{type:"ADD_PROJECT",projectName:e,messageFromServer:t,responsedNewProject:n,userId:a,token:r}}(e,r.data.message,r.data.project,t,n)),a({type:"ADD_PROJECT_DONE"})}).catch(function(e){a(function(e){return{type:"ADD_PROJECT_FAILED",errorMessage:e}}(e))})}}(t,n,a))},onProjectChoice:function(t,n,a){return e(function(e,t,n){return{type:"CHOSE_PROJECT",projectId:e,projectName:t,projectOwner:n}}(t,n,a))},onDelete:function(t,n,a){return e(function(e,t,n){return function(a){w.a.delete("/projectsList/removeProject/"+e,{headers:{Authorization:"Bearer "+n}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Deleting a project failed");a(function(e,t,n,a){return{type:"REMOVE_PROJECT",projectId:e,message:t,userId:n,token:a}}(e.data.projectId,e.data.message,t,n)),a({type:"CLOSE_MODAL"})}).catch(function(e){console.log(e)})}}(t,n,a))},onNameEdit:function(t,n,a,r){return e(A(t,n,a,r))},onGetProjectsList:function(t,n){return e(function(e,t){return function(n){w.a.get("/projectsList",{headers:{Authorization:"Bearer "+t}}).then(function(t){console.log(t),n(function(e,t){return{type:"GET_PROJECTS_LIST",userId:e,projects:t}}(e,t.data.projects))}).catch(function(e){n(function(e){return{type:"GET_PROJECTS_LIST_FAILED",error:e}}(e))})}}(t,n))},onSetLoggedIn:function(t,n,a){return e(F(t,n,a))},onLogOut:function(){return e(_())}}})(Object(v.g)(Xt)),$t=(n(291),function(e){return o.a.createElement(E,null,o.a.createElement($,{version:"init",wide:"no",language:"pl",projectTitle:"",changeLn:e.changeLn,currLn:e.currLn}),o.a.createElement("div",{className:"container HelpPage"},o.a.createElement("p",null),o.a.createElement("div",{className:"faq"},o.a.createElement("h5",null,"W jakim celu nale\u017cy si\u0119 zarejestrowa\u0107?"),o.a.createElement("p",null,"Dzi\u0119ki rejestracji istnieje mo\u017cliwo\u015b\u0107 zarz\u0105dzania swoimi plikami w obr\u0119bie tworzonych projekt\xf3w. Ponadto przydzielana jest prywatna przestrze\u0144 na pliki u\u017cytkownika.")),o.a.createElement("div",{className:"faq"},o.a.createElement("h5",null,"Zapomnia\u0142em has\u0142o, co robi\u0107?"),o.a.createElement("p",null,"P\xf3ki co serwis nie posiada funkcjonalno\u015bci przypomnienia has\u0142a. Napisz do nas maila (adres w stopce na dole strony) aby\u015bmy mogli zresetowa\u0107 has\u0142o za Ciebie.")),o.a.createElement("div",{className:"faq"},o.a.createElement("h5",null,"Czy moje pliki s\u0105\xa0bezpieczne?"),o.a.createElement("p",null,"Pliki s\u0105 przechowywane w centralnym repozytorium do kt\xf3rego dost\u0119p posiada tylko zarejestrowana osoba. Pliki mo\u017cna ewentualnie usun\u0105\u0107 po zapisaniu wynik\xf3w us\u0142ug."))))}),Qt=n(77),en=(n(308),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={password:"",confirmPassword:"",submitted:!1,czyHaslaPasuja:!0},n.handleChange=function(e){return function(t){n.setState(Object(he.a)({},e,t.target.value))}},n.updatePassword=function(e){e.preventDefault();var t=n.props,a=t.userId,r=t.token,o=n.state.password;o==n.state.confirmPassword&&o.length>6?(n.setState({czyHaslaPasuja:!0}),w.a.post("/auth/enterNewPass/"+a+"/"+r,{newPassword:o}).then(function(e){console.log("RESPONSE FROM SERVER TO CLIENT:",e)}).catch(function(e){console.log("SERVER ERROR TO CLIENT:",e)}),n.setState({submitted:!n.state.submitted})):n.setState({czyHaslaPasuja:!1})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.submitted;return o.a.createElement(E,null,o.a.createElement("p",null),o.a.createElement("h3",{style:{paddingBottom:"1.25rem"}},"Wpisz swoje nowe has\u0142o"),o.a.createElement("p",null,"Has\u0142o musi sk\u0142ada\u0107 si\u0119 z conajmniej 7 znak\xf3w"),0==this.state.czyHaslaPasuja?o.a.createElement("b",null,"Has\u0142a nie pasuj\u0105 do siebie"):null,e?o.a.createElement("div",{className:"reset-password-form-sent-wrapper"},o.a.createElement("p",null,"Twoje has\u0142o zosta\u0142o zapisane."),o.a.createElement(g.b,{to:"/login",className:"ghost-btn"},"Wr\xf3\u0107 aby si\u0119 zalogowa\u0107")):o.a.createElement("div",{className:"reset-password-form-wrapper"},o.a.createElement("form",{onSubmit:this.updatePassword,style:{paddingBottom:"1.5rem"}},o.a.createElement("input",{onChange:this.handleChange("password"),value:this.state.password,placeholder:"Nowe has\u0142o",type:"password"}),o.a.createElement("input",{onChange:this.handleChange("confirmPassword"),value:this.state.confirmPassword,placeholder:"Potwierd\u017a has\u0142o",type:"password"}),o.a.createElement("button",{className:"btn-primary password-reset-btn"},"Zmie\u0144 has\u0142o"))))}}]),t}(r.Component)),tn=n(134),nn=n.n(tn),an=n(135),rn=n.n(an),on=n(136),sn=n(137);Object(Qt.b)([].concat(Object(m.a)(nn.a),Object(m.a)(rn.a)));var cn={pl:on,en:sn},ln=(navigator.language.split(/[-_]/)[0],function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={currln:"pl"},n.logoutHandler=function(){n.props.onLogout()},n.setAutoLogout=function(e){setTimeout(function(){n.logoutHandler()},e)},n.changeLnHandler=function(e){n.setState({currln:e})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token"),t=localStorage.getItem("expiryDate");if(e&&t)if(new Date(t)<=new Date)this.logoutHandler();else{var n=localStorage.getItem("userId"),a=localStorage.getItem("userName"),r=new Date(t).getTime()-(new Date).getTime();this.props.onSetLoggedIn(n,a,e),this.setAutoLogout(r)}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement(Qt.a,{locale:this.state.currln,defaultLocale:"pl",messages:cn[this.state.currln]},o.a.createElement(v.d,null,o.a.createElement(v.b,{path:"/enterNewPass/:userId/:token",render:function(e){var t=e.match;return o.a.createElement(en,{userId:t.params.userId,token:t.params.token})}}),o.a.createElement(v.b,{path:"/projects/:projectID",render:function(t){return o.a.createElement(Gt,Object.assign({},t,{changeLn:e.changeLnHandler,currLn:e.state.currln}))}}),o.a.createElement(v.b,{path:"/projectsList",render:function(t){return o.a.createElement(Yt,Object.assign({},t,{changeLn:e.changeLnHandler,currLn:e.state.currln}))}}),o.a.createElement(v.b,{path:"/help",render:function(t){return o.a.createElement($t,Object.assign({},t,{changeLn:e.changeLnHandler,currLn:e.state.currln}))}}),o.a.createElement(v.b,{path:"/",render:function(t){return o.a.createElement(Q,Object.assign({},t,{changeLn:e.changeLnHandler,currLn:e.state.currln}))}}))))}}]),t}(r.Component)),un=Object(y.b)(function(e){return{isAuth:e.homeR.isAuth,chosenProjectID:e.prolistR.chosenProjectID}},function(e){return{onLogout:function(){return e(_())},onSetLoggedIn:function(t,n,a){return e(F(t,n,a))}}})(Object(v.g)(ln));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var dn=n(44),pn=function(e,t){return Object(h.a)({},e,t)},mn=function(e,t){return e.reduce(function(e,n){return Object(h.a)({},e,Object(he.a)({},n[t],n))},{})},En=function(e){return e.map(function(e){return e.id})},fn={isAuth:!1,email:"",pass:"",userName:"",registrationMessage:"",loginMessage:"",forgotPassMessage:"",resRegistrationStatus:0,resLoginStatus:0,resForgotPassStatus:0,forgotPassEmailSent:!1,isLoading:!1,token:"",authLoading:!1,userId:"",error:"",autoLogoutAfter:0},hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return function(e,t){return pn(e,{isAuth:t.isAuth,userName:t.userName,token:t.token,authLoading:t.authLoading,userId:t.userId,resLoginStatus:t.resLoginStatus})}(e,t);case"LOG_OUT":return function(e,t){var n;return localStorage.removeItem("token"),localStorage.removeItem("expiryDate"),localStorage.removeItem("userId"),localStorage.removeItem("userName"),pn(e,(n={isAuth:!1,token:"",userId:"",email:"",pass:"",userName:"",registrationMessage:"",loginMessage:"",resRegistrationStatus:0,resLoginStatus:0},Object(he.a)(n,"token",""),Object(he.a)(n,"authLoading",!1),Object(he.a)(n,"error",""),Object(he.a)(n,"autoLogoutAfter",0),n))}(e);case"LOG_IN_FAILED":return function(e,t){return pn(e,{isAuth:t.isAuth,token:t.token,authLoading:t.authLoading,userId:t.userId,loginMessage:t.message,resLoginStatus:t.resLoginStatus})}(e,t);case"REGISTER":return function(e,t){var n=t.message,a=(t.userId,t.resRegistrationStatus);return pn(e,{isAuth:!1,registrationMessage:n,resRegistrationStatus:a})}(e,t);case"REGISTER_FAILED":return function(e,t){var n=t.message;return pn(e,{isAuth:!1,registrationMessage:n,resRegistrationStatus:t.resRegistrationStatus})}(e,t);case"SET_AUTO_LOGOUT":return function(e,t){var n=t.autoLogoutAfter;return pn(e,{autoLogoutAfter:n})}(e,t);case"FORGOT_PASS_FAILED":return function(e,t){var n=t.message,a=t.resForgotPassStatus;return pn(e,{forgotPassMessage:n,resForgotPassStatus:a,forgotPassEmailSent:!1})}(e,t);case"FORGOT_PASS":return function(e,t){var n=t.message,a=t.resForgotPassStatus;return pn(e,{forgotPassMessage:n,resForgotPassStatus:a,forgotPassEmailSent:!0})}(e,t);case"START_LOADING":return function(e,t){return pn(e,{isLoading:!0})}(e);case"STOP_LOADING":return function(e,t){return pn(e,{isLoading:!1})}(e)}return e},gn={projects:[],error:!1,projectsLoading:!0,chosenProjectID:"",chosenProjectName:"",chosenProjectOwner:"",loaded:!1,errorMessage:"",modalDisplay:!1,localAction:"",projectId:"",projectName:""},vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROJECTS_LIST":return function(e,t){return pn(e,{projects:t.projects,error:!1,projectsLoading:!1})}(e,t);case"GET_PROJECTS_LIST_FAILED":return function(e,t){return console.log(t),pn(e,{error:!0,loaded:!1,errorMessage:t.errorMessage})}(e,t);case"CHOSE_PROJECT":return function(e,t){return pn(e,{chosenProjectID:t.projectId,chosenProjectName:t.projectName,chosenProjectOwner:t.projectOwner})}(e,t);case"ADD_PROJECT_INIT":return function(e,t){return pn(e,{loaded:!1})}(e);case"ADD_PROJECT_DONE":return function(e,t){return pn(e,{loaded:!0,errorMessage:"",modalDisplay:!1})}(e);case"ADD_PROJECT":return function(e,t){var n=[t.responsedNewProject].concat(Object(m.a)(e.projects));return pn(e,{projects:n,loaded:!0})}(e,t);case"ADD_PROJECT_FAILED":return function(e,t){return pn(e,{errorMessage:t.errorMessage.response.data.message})}(e,t);case"DUPLICATE_PROJECT":case"SHARE_PROJECT":return function(e,t){return pn(e,{})}(e);case"REMOVE_PROJECT":return function(e,t){var n=t.projectId,a=(t.message,Object(m.a)(e.projects)),r=0,o=a.map(function(e,t){if(e._id!==n)return e;r=t});return o=[].concat(Object(m.a)(o.slice(0,r)),Object(m.a)(o.slice(r+1))),pn(e,{projects:o})}(e,t);case"EDIT_NAME":return function(e,t){var n=t.projectId,a=t.newProjectName,r=t.message;console.log(n),console.log(a),console.log(r);var o=Object(m.a)(e.projects).map(function(e){return e._id!==n?e:Object(h.a)({},e,{name:a})});return pn(e,{projects:o,errorMessage:"",error:!1})}(e,t);case"EDIT_NAME_FAILED":return function(e,t){var n=t.error;return pn(e,{errorMessage:n,error:!0})}(e,t);case"OPEN_MODAL":return function(e,t){return pn(e,{modalDisplay:!0,localAction:t.localActionType,projectId:t.projectId,projectName:t.projectName})}(e,t);case"CLOSE_MODAL":return function(e,t){return pn(e,{modalDisplay:!1})}(e)}return e},yn=n(12),bn={containersForREC:[],refusedFileList:[],modal:!1,recoFileForPreview:"",recoContainerForPreview:"",transcriptionData:{blocks:[{starttime:1,stoptime:2,data:{text:"",type:"speech"}}]}},In=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CONTAINER_TO_PREVIEW_RECO":return function(e,t){return pn(e,{recoContainerForPreview:t.containerForPreview})}(e,t);case"ADD_CONTAINER_TO_RECO":return function(e,t){var n=t.container;return Object(yn.a)(e,function(t){e.containersForREC.filter(function(e){return e._id==n._id}).length<1&&t.containersForREC.unshift(n)})}(e,t);case"DROP_FILES":return function(e,t){var n=[].concat(Object(m.a)(e.containersForREC),Object(m.a)(t.files));return pn(e,{containersForREC:n})}(e,t);case"INIT_BATCH_RECOGNITION":return function(e,t){return console.log("INIT BATCH RECOGNITION"),e.containersForREC.length,pn(e,{})}(e);case"INIT_BATCH_RECOGNITION":return function(e,t){return pn(e,{})}(e);case"UPDATE_FILE_STATE":return function(e,t){var n=t.containerId,a=t.status;return Object(yn.a)(e,function(e){e.containersForREC.findIndex(function(e){return e._id===n}),e.containersForREC[n].status=a})}(e,t);case"REMOVE_RECOGNITION_ITEM":return function(e,t){var n=t.container._id;return Object(yn.a)(e,function(t){var a=e.containersForREC.filter(function(e,t){return e._id!=n});t.containersForREC=a})}(e,t);case"OPEN_AUDIO_RECOGNITION_PREVIEW":return function(e,t){var n=t.fileID,a=e.containersForREC.find(function(e){return e.id==n});return console.log(a.file),pn(e,{recoFileForPreview:a.file})}(e,t);case"CLEAR_RECO_STORE":return function(e,t){return pn(e,{containersForREC:[],modal:!1,recoFileForPreview:""})}(e);case"REFUSE_RECO_FILES":return function(e,t){return pn(e,{refusedFileList:t.refusedFileList})}(e,t);case"LOAD_TRANSCRIPTION":return function(e,t){return pn(e,{transcriptionData:t.transcriptData.data})}(e,t);case"REPO_RUN_SPEECH_RECOGNITION_DONE":return function(e,t){var n=t.containerId;return t.toolType,Object(yn.a)(e,function(e){var t=e.containersForREC.findIndex(function(e){return e._id===n});e.containersForREC[t].ifREC=!0,e.containersForREC[t].statusREC="done",e.recoContainerForPreview._id==n&&(e.recoContainerForPreview.ifREC=!0,e.recoContainerForPreview.statusREC="done")})}(e,t);case"REPO_RUN_SPEECH_RECOGNITION_FAILED":return function(e,t){var n=t.containerId,a=(t.toolType,e.containersForREC.findIndex(function(e){return e._id===n}));return Object(yn.a)(e,function(e){e.containersForREC[a].ifREC=!1,e.containersForREC[a].statusREC="error"})}(e,t);case"SET_CONTAINER_STATUS":return function(e,t){var n=t.containerId,a=t.toolType,r=t.status;return"REC"==a?Object(yn.a)(e,function(e){var t=e.containersForREC.findIndex(function(e){return e._id===n});e.containersForREC[t].statusREC=r}):e}(e,t);case"SAVE_TRANSCRIPTION_SUCCESS":return function(e,t){var n=t.containerId,a=t.toolType;return Object(yn.a)(e,function(e){var t=e.containersForREC.findIndex(function(e){return e._id===n});switch(a){case"DIA":e.containersForREC[t].ifDIA=!0,e.containersForREC[t].statusDIA="done";break;case"VAD":e.containersForREC[t].ifVAD=!0,e.containersForREC[t].statusVAD="done";break;case"REC":e.containersForREC[t].ifREC=!0,e.containersForREC[t].statusREC="done";break;case"SEG":e.containersForREC[t].ifSEG=!0,e.containersForREC[t].statusSEG="done";break;default:console.log("Default")}})}(e,t)}return e},wn={containersForSEG:[],alignContainerForPreview:""},Sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONTAINER_STATUS":return function(e,t){var n=t.containerId,a=t.toolType,r=t.status;return"SEG"==a?Object(yn.a)(e,function(e){var t=e.containersForSEG.findIndex(function(e){return e._id===n});e.containersForSEG[t].statusSEG=r}):e}(e,t);case"ADD_CONTAINER_TO_PREVIEW_ALIGN":return function(e,t){return pn(e,{alignContainerForPreview:t.containerForPreview})}(e,t);case"ADD_CONTAINER_TO_ALIGN":return function(e,t){var n=t.container,a=null,r=e.containersForSEG.filter(function(e){return e._id==n._id});return a=r.length<1?[n].concat(Object(m.a)(e.containersForSEG)):Object(m.a)(e.containersForSEG),Object(yn.a)(e,function(e){e.containersForSEG=a})}(e,t);case"REPO_RUN_SPEECH_SEGMENTATION_DONE":return function(e,t){var n=t.containerId;return t.toolType,Object(yn.a)(e,function(e){var t=e.containersForSEG.findIndex(function(e){return e._id===n});e.containersForSEG[t].ifSEG=!0,e.containersForSEG[t].statusSEG="done"})}(e,t);case"REPO_RUN_SPEECH_SEGMENTATION_FAILED":return function(e,t){var n=t.containerId,a=(t.toolType,t.message),r=e.containersForSEG.findIndex(function(e){return e._id===n});return Object(yn.a)(e,function(e){e.containersForSEG[r].ifSEG=!1,e.containersForSEG[r].statusSEG="error",e.containersForSEG[r].errorMessage=a})}(e,t);case"REMOVE_RECOGNITION_ITEM":return function(e,t){var n=t.container._id;return Object(yn.a)(e,function(t){var a=e.containersForSEG.filter(function(e,t){return e._id!=n});t.containersForSEG=a})}(e,t)}return e},jn={txtContent:"",txtDisplayed:!1,txtfileName:"",txtFileUrl:"",audiofileName:"",audioContent:null,audioDisplayed:!1,audioFileUrl:"",waveSurferInitialized:!1,playing:!1},Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_TXT_PREVIEW":return function(e,t){return pn(e,{txtContent:t.newContent,txtDisplayed:!0})}(e,t);case"UPDATE_AUDIO_PREVIEW":return function(e,t){return pn(e,{audioDisplayed:!0})}(e);case"OPEN_TXT_FILE_PREVIEW":return function(e,t){var n=t.fileContent,a=t.fileUrl,r=t.fileKey;return pn(e,{txtfileName:r,txtFileUrl:a,txtDisplayed:!1,txtContent:n})}(e,t);case"OPEN_AUDIO_FILE_PREVIEW":return function(e,t){var n=t.fileUrl,a=t.fileKey,r=t.waveSurferInitialized;return console.log(r),pn(e,{audiofileName:a,audioDisplayed:!1,audioFileUrl:n,waveSurferInitialized:r,playing:!1})}(e,t);case"WAVESURFER_INITIALIZED":return function(e,t){return pn(e,{waveSurferInitialized:t.ifYes})}(e,t);case"TOGGLE_PLAYING_PREVIEW":return function(e,t){return e.playing?pn(e,{playing:!1}):pn(e,{playing:!0})}(e);case"CLEAR_PREVIEW_STORE":return function(e,t){return pn(e,{txtContent:"",txtDisplayed:!1,txtfileName:"",txtFileUrl:"",audiofileName:"",audioDisplayed:!1,audioFileUrl:"",waveSurferInitialized:!1,playing:!1})}(e);case"CHANGE_AUDIO_DISPLAYED":return function(e,t){return pn(e,{audioDisplayed:t.ifYes})}(e,t)}return e},Tn=n(51),On=(n(320),n(138)),kn=n.n(On),An=n(139),Pn=n.n(An),Dn={message:"",iferror:!1,currentlySelectedSessions:[],currentlySelectedContainers:[],sessions:{byId:{},allIds:[]},containers:{byId:{},allIds:[]},txtFiles:{byId:{},allIds:{}},containerBinaryPreviewREC:null,containerBinaryPreviewVAD:null,containerBinaryPreviewDIA:null,containerBinaryPreviewSEG:null,containerAudioFileREC:null,containerAudioFileVAD:null,containerAudioFileDIA:null,containerAudioFileSEG:null,exportToEmuReady:!1},Rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONTAINER_STATUS":return function(e,t){var n=t.containerId,a=t.toolType,r=t.status;return Object(yn.a)(e,function(e){switch(a){case"DIA":e.containers.byId[n].statusDIA=r;break;case"VAD":e.containers.byId[n].statusVAD=r;break;case"REC":e.containers.byId[n].statusREC=r;break;case"SEG":e.containers.byId[n].statusSEG=r;break;default:console.log("Default")}})}(e,t);case"REPO_RUN_SPEECH_RECOGNITION_DONE":return function(e,t){var n=t.containerId;return t.toolType,Object(yn.a)(e,function(e){e.containers.byId[n].ifREC=!0,e.containers.byId[n].statusREC="ready"})}(e,t);case"REPO_RUN_SPEECH_RECOGNITION_FAILED":return function(e,t){var n=t.containerId;return t.toolType,Object(yn.a)(e,function(e){e.containers.byId[n].ifREC=!1,e.containers.byId[n].statusREC="error"})}(e,t);case"REPO_RUN_SPEECH_SEGMENTATION_DONE":return function(e,t){var n=t.containerId;return t.toolType,t.message,Object(yn.a)(e,function(e){e.containers.byId[n].ifSEG=!0,e.containers.byId[n].statusSEG="ready"})}(e,t);case"REPO_RUN_SPEECH_SEGMENTATION_FAILED":return function(e,t){var n=t.containerId,a=(t.toolType,t.message);return Object(yn.a)(e,function(e){e.containers.byId[n].ifSEG=!1,e.containers.byId[n].statusSEG="error",e.containers.byId[n].errorMessage=a})}(e,t);case"REPO_RUN_SPEECH_DIARIZATION_DONE":return function(e,t){var n=t.containerId;return t.toolType,Object(yn.a)(e,function(e){e.containers.byId[n].ifDIA=!0,e.containers.byId[n].statusDIA="ready"})}(e,t);case"REPO_RUN_SPEECH_DIARIZATION_FAILED":return function(e,t){var n=t.containerId;return t.toolType,Object(yn.a)(e,function(e){e.containers.byId[n].ifDIA=!1,e.containers.byId[n].statusDIA="error"})}(e,t);case"REPO_RUN_SPEECH_VAD_DONE":return function(e,t){var n=t.containerId,a=(t.toolType,t.VADSegments);return Object(yn.a)(e,function(e){e.containers.byId[n].ifVAD=!0,e.containers.byId[n].statusVAD="ready",e.containers.byId[n].VADUserSegments=a})}(e,t);case"REPO_RUN_SPEECH_VAD_FAILED":return function(e,t){var n=t.containerId;return t.toolType,Object(yn.a)(e,function(e){e.containers.byId[n].ifVAD=!1,e.containers.byId[n].statusVAD="error"})}(e,t);case"LOAD_BINARY_FOR_PREVIEW":return function(e,t){var n=t.containerBinaryData,a=t.toolType;return Object(yn.a)(e,function(e){switch(a){case"DIA":e.containerBinaryPreviewDIA=n;break;case"VAD":e.containerBinaryPreviewVAD=n;break;case"REC":e.containerBinaryPreviewREC=n;break;case"SEG":e.containerBinaryPreviewSEG=n;break;default:console.log("Default")}})}(e,t);case"LOAD_AUDIO_FOR_PREVIEW":return function(e,t){var n=t.containerAudioFile,a=t.toolType;return Object(yn.a)(e,function(e){switch(a){case"DIA":e.containerAudioFileDIA=n;break;case"VAD":e.containerAudioFileVAD=n;break;case"REC":e.containerAudioFileREC=n;break;case"SEG":e.containerAudioFileSEG=n;break;default:console.log("Default")}})}(e,t);case"REPO_SELECT_SESSION":return function(e,t){var n=t.sessionId;return Object(yn.a)(e,function(e){var t=e.containers.byId,a=e.sessions.byId,r=e.currentlySelectedSessions[0];if(e.currentlySelectedContainers[0],n==r)a[n].ifSelected=!1,e.currentlySelectedSessions[0]=null;else{e.currentlySelectedSessions[0]=n,a[n].ifSelected=!0;var o=e.currentlySelectedContainers[0];void 0!==t[o]&&(console.log(o),console.log(t[o]),t[o].ifSelected=!1,e.currentlySelectedContainers[0]=null),null!=a[r]&&(a[r].ifSelected=!1)}})}(e,t);case"REPO_SELECT_CONTAINER":return function(e,t){var n=t.containerId;return Object(yn.a)(e,function(e){var t=e.containers.byId,a=e.sessions.byId,r=e.currentlySelectedContainers[0];if(n==r)e.currentlySelectedContainers[0]=null,t[r].ifSelected=!1;else if(n){e.currentlySelectedContainers[0]=n,t[n].ifSelected=!0,r&&(t[r].ifSelected=!1);var o=e.currentlySelectedSessions[0];null!=o&&(a[o].ifSelected=!1,e.currentlySelectedSessions[0]=null)}else r&&(e.currentlySelectedContainers[0]=null,t[n].ifSelected=!1)})}(e,t);case"REPO_GET_USER_PROJECT_FILES":return function(e,t){var n=t.sessions,a=t.containers;return Object(yn.a)(e,function(e){e.sessions.byId=mn(n,"id"),e.sessions.allIds=En(n),e.containers.byId=mn(a,"_id"),e.containers.allIds=En(a)})}(e,t);case"REPO_GET_USER_PROJECT_FILES_FAILED":return function(e,t){var n=t.error.toString();return pn(e,{message:n,iferror:!0})}(e,t);case"REPO_CREATE_NEW_SESSION":return function(e,t){var n=t.sessionName,a=t.sessionId;return Object(yn.a)(e,function(e){e.sessions.byId=Object(h.a)({},e.sessions.byId,Object(he.a)({},a,{id:a,sessionName:n,ifSelected:!1,containers:[]})),e.sessions.allIds.push(a)})}(e,t);case"REPO_CREATE_NEW_SESSION_FAILED":return function(e,t){var n=t.errorMessage;return Object(yn.a)(e,function(e){e.ifError=!0,e.message=n})}(e,t);case"REPO_DELETE_CONTAINER_SUCCESS":return function(e,t){t.message;var n=t.sessionId,a=t.containerId;return Object(yn.a)(e,function(t){var r=e.sessions.byId[n].containers.filter(function(e,t,n){return e!=a});t.sessions.byId[n].containers=r;var o=Object.keys(e.containers.byId).reduce(function(t,n){return n!==a&&(t[n]=e.containers.byId[n]),t},{});t.containers.byId=o,t.currentlySelectedSessions[0]=null,t.currentlySelectedContainers[0]=null})}(e,t);case"REPO_DELETE_CONTAINER_FAILED":return function(e,t){var n=t.error.message;return Object(yn.a)(e,function(e){e.message=n,e.iferror=!0})}(e,t);case"REPO_DELETE_SESSION_SUCCESS":return function(e,t){t.message;var n=t.sessionId;return console.log(n),Object(yn.a)(e,function(t){var a=e.sessions.byId[n].containers;console.log(a);var r=Object.keys(e.sessions.byId).reduce(function(t,a){return a!==n&&(t[a]=e.sessions.byId[a]),t},{});t.sessions.byId=r,console.log(r);var o=Object.keys(e.containers.byId).reduce(function(t,n){return 0==a.includes(n)&&(t[n]=e.containers.byId[n]),t},{});t.containers.byId=o,console.log(o),t.currentlySelectedSessions[0]=null,t.currentlySelectedContainers[0]=null})}(e,t);case"REPO_DELETE_SESSION_FAILED":return function(e,t){var n=t.error.message;return Object(yn.a)(e,function(e){e.message=n,e.iferror=!0})}(e,t);case"SAVE_TRANSCRIPTION_SUCCESS":return function(e,t){var n=t.containerId;return t.toolType,Object(yn.a)(e,function(e){e.containers.byId[n].ifREC=!0,e.containers.byId[n].statusREC="ready"})}(e,t);case"EXPORT_TO_EMU_DONE_SUCCESS":return function(e,t){return Object(yn.a)(e,function(e){e.exportToEmuReady=!0})}(e);case"EXPORT_TO_EMU_DONE_FAILED":case"KORPUS_DOWNLOADED":return function(e,t){return Object(yn.a)(e,function(e){e.exportToEmuReady=!1})}(e)}return e},Nn=n(140),_n={currentProjectID:"",currentProjectName:"",currentProjectOwner:"",modal:!1,errorMessage:"",error:!1,transcriptionSaved:!1,transcriptionSavedMessage:""},Fn=function(e,t){var n=t.error;return pn(e,{errorMessage:n,error:!0})},zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_PROJECT":return function(e,t){return pn(e,{currentProjectID:t.projectId,currentProjectName:t.projectTitle,currentProjectOwner:t.projectOwner})}(e,t);case"OPEN_MODAL_PROJECT":return function(e,t){return pn(e,{modal:!0})}(e);case"CLOSE_MODAL_PROJECT":return function(e,t){return pn(e,{modal:!1})}(e);case"EDIT_NAME":return function(e,t){t.projectId;var n=t.newProjectName;return t.message,pn(e,{currentProjectName:n,errorMessage:"",error:!1})}(e,t);case"EDIT_NAME_FAILED":case"EDIT_NAME_FAILED":return Fn(e,t);case"SAVE_TRANSCRIPTION_SUCCESS":return function(e,t){return pn(e,{transcriptionSaved:!0,transcriptionSavedMessage:t.message})}(e,t);case"SAVE_TRANSCRIPTION_FAILED":return function(e,t){return pn(e,{transcriptionSaved:!1})}(e);case"TRANSCRIPTION_CHANGED":return function(e,t){return pn(e,{transcriptionSaved:!1,transcriptionSavedMessage:""})}(e)}return e},Ln={containersForVAD:[],refusedFileList:[],vadContainerForPreview:""},xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CONTAINER_TO_VAD":return function(e,t){var n=t.container,a=null;return a=e.containersForVAD.filter(function(e){return e._id==n._id}).length<1?[n].concat(Object(m.a)(e.containersForVAD)):Object(m.a)(e.containersForVAD),pn(e,{containersForVAD:a})}(e,t);case"ADD_CONTAINER_TO_PREVIEW_VAD":return function(e,t){return pn(e,{vadContainerForPreview:t.containerForPreview})}(e,t);case"REPO_RUN_SPEECH_VAD_DONE":return function(e,t){var n=t.containerId,a=(t.toolType,t.VADSegments);return Object(yn.a)(e,function(e){var t=e.containersForVAD.findIndex(function(e){return e._id===n});e.containersForVAD[t].ifVAD=!0,e.containersForVAD[t].statusVAD="done",e.containersForVAD[t].VADUserSegments=a,e.vadContainerForPreview._id==e.containersForVAD[t]._id&&(e.vadContainerForPreview=e.containersForVAD[t])})}(e,t);case"REPO_RUN_SPEECH_VAD_FAILED":return function(e,t){var n=t.containerId,a=(t.toolType,t.message),r=e.containersForVAD.findIndex(function(e){return e._id===n});return Object(yn.a)(e,function(e){e.containersForVAD[r].ifVAD=!1,e.containersForVAD[r].statusVAD="error",e.containersForVAD[r].errorMessage=a})}(e,t);case"SET_CONTAINER_STATUS":return function(e,t){var n=t.containerId,a=t.toolType,r=t.status;return"VAD"==a?Object(yn.a)(e,function(e){var t=e.containersForVAD.findIndex(function(e){return e._id===n});e.containersForVAD[t].statusVAD=r}):e}(e,t);case"SAVE_VAD_SEGMENTS_SUCCESS":return function(e,t){var n=t.containerId,a=(t.toolType,t.updatedSegments);return Object(yn.a)(e,function(e){var t=e.containersForVAD.findIndex(function(e){return e._id===n});e.containersForVAD[t].VADUserSegments=a,e.vadContainerForPreview.VADUserSegments=a})}(e,t);case"REMOVE_RECOGNITION_ITEM":return function(e,t){var n=t.container._id;return Object(yn.a)(e,function(t){var a=e.containersForVAD.filter(function(e,t){return e._id!=n});t.containersForVAD=a})}(e,t)}return e},Un={containersForDIA:[],refusedFileList:[],diaContainerForPreview:""},Mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CONTAINER_TO_DIA":return function(e,t){var n=t.container,a=null;return a=e.containersForDIA.filter(function(e){return e._id==n._id}).length<1?[n].concat(Object(m.a)(e.containersForDIA)):Object(m.a)(e.containersForDIA),pn(e,{containersForDIA:a})}(e,t);case"ADD_CONTAINER_TO_PREVIEW_DIA":return function(e,t){return pn(e,{diaContainerForPreview:t.containerForPreview})}(e,t);case"REPO_RUN_SPEECH_DIARIZATION_DONE":return function(e,t){var n=t.containerId,a=(t.toolType,t.DIAsegments);return Object(yn.a)(e,function(e){var t=e.containersForDIA.findIndex(function(e){return e._id===n});e.containersForDIA[t].ifDIA=!0,e.containersForDIA[t].statusDIA="done",e.containersForDIA[t].DIAUserSegments=a,e.diaContainerForPreview._id==e.containersForDIA[t]._id&&(e.diaContainerForPreview=e.containersForDIA[t])})}(e,t);case"REPO_RUN_SPEECH_DIARIZATION_FAILED":return function(e,t){var n=t.containerId,a=(t.toolType,e.containersForDIA.findIndex(function(e){return e._id===n}));return Object(yn.a)(e,function(e){e.containersForDIA[a].ifDIA=!1,e.containersForDIA[a].statusDIA="error"})}(e,t);case"SET_CONTAINER_STATUS":return function(e,t){var n=t.containerId,a=t.toolType,r=t.status;return"DIA"==a?Object(yn.a)(e,function(e){var t=e.containersForDIA.findIndex(function(e){return e._id===n});e.containersForDIA[t].statusDIA=r}):e}(e,t);case"SAVE_DIA_SEGMENTS_SUCCESS":return function(e,t){var n=t.containerId,a=(t.toolType,t.updatedSegments);return Object(yn.a)(e,function(e){var t=e.containersForDIA.findIndex(function(e){return e._id===n});e.containersForDIA[t].DIAUserSegments=a,e.diaContainerForPreview.DIAUserSegments=a})}(e,t);case"REMOVE_RECOGNITION_ITEM":return function(e,t){var n=t.container._id;return Object(yn.a)(e,function(t){var a=e.containersForDIA.filter(function(e,t){return e._id!=n});t.containersForDIA=a})}(e,t)}return e};function Vn(){var e=Object(a.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return Vn=function(){return e},e}n.d(t,"createNotification",function(){return Bn}),n.d(t,"loader",function(){return Jn}),Pn.a.config();var Gn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||dn.d;console.log(kn.a.green("APP IN PRODUCTION MODE")),console.log=function(){},w.a.defaults.baseURL=window.axiosBaseURL,w.a.defaults.timeout=72e7,w.a.interceptors.response.use(function(e){return e},function(e){if(e.response){var t=e.response.status,n=(e.response.statusText,e.response.data);t>=500?Bn("error",n.message):t>=300&&Bn("warning",n.message)}else e.request&&Bn("error","Co\u015b posz\u0142o nie tak na serwerze!");return Promise.reject(e)});var Hn=Object(dn.c)({homeR:hn,projectR:zn,prolistR:vn,recR:In,segR:Sn,vadR:xn,diaR:Mn,repoR:Rn,previewR:Cn});function Bn(e,t){switch(e){case"info":Tn.NotificationManager.info(t,"",5e3);break;case"success":Tn.NotificationManager.success(t,"",5e3);break;case"warning":Tn.NotificationManager.warning(t,"",5e3);break;case"error":Tn.NotificationManager.error(t,"",5e3)}}var Wn=Object(le.css)(Vn()),Jn=function(){return o.a.createElement("div",{id:"superloader",style:{position:"fixed",width:"100%",height:"100%",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255,255,255,0.5)",zIndex:99999999,cursor:"pointer"}},o.a.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},o.a.createElement(ce.RingLoader,{css:Wn,size:150,color:"rgb(84, 108, 120)",loading:!0})))},Kn=Object(dn.e)(Hn,Gn(Object(dn.a)(Nn.a))),Zn=o.a.createElement(y.a,{store:Kn},o.a.createElement(Tn.NotificationContainer,null),o.a.createElement(g.a,null,o.a.createElement(un,null)));s.a.render(Zn,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},69:function(e,t,n){e.exports=n.p+"static/media/logo-clarin-pl-short.0ea93d1c.png"}},[[147,1,2]]]);
//# sourceMappingURL=main.422e7b92.chunk.js.map